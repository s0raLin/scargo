===== FILE: README.md =====
# Sinter

A Cargo-like build tool for Scala projects.

ğŸ“– **Documentation**: [English](README.md) | [ä¸­æ–‡](README_CN.md)

## Features

- Project initialization with `sinter new <name>`
- Building Scala projects with `sinter build`
- Running Scala applications with `sinter run`
- Adding dependencies with `sinter add <dep>`
- Configurable project settings via `Sinter.toml`

## Installation

### From Source

```bash
git clone https://github.com/yourusername/sinter.git
cd sinter
cargo build --release
# Add target/release/sinter to your PATH
```

### Prerequisites

- Rust (latest stable)
- Scala CLI (for Scala compilation and execution)

## Quick Start

```bash
# Create a new project
sinter new hello-scala
cd hello-scala

# Add a dependency
sinter add cats

# Build and run
sinter build
sinter run
```

## Usage

### Getting Help

```bash
sinter --help          # Show all commands
sinter [command] --help # Show help for specific command
```

### Create a new project

```bash
sinter new my-scala-project
cd my-scala-project
```

This creates a new Scala project with the following structure:
```
my-scala-project/
â”œâ”€â”€ Sinter.toml          # Project configuration
â””â”€â”€ src/main/scala/
    â””â”€â”€ Main.scala       # Main application file
```

### Build the project

```bash
sinter build
```

Compiles all Scala sources in `src/main/scala` and places compiled classes in the `target_dir` specified in `Sinter.toml`.

### Run the project

```bash
sinter run
sinter run path/to/MyFile.scala
sinter run --lib
```

- Without arguments: Runs the main file specified in `Sinter.toml`
- With a file path: Runs the specified Scala file
- `--lib`: Forces library mode (compile only, no execution)

### Add dependencies

```bash
sinter add cats
sinter add org.typelevel::cats-core_2.13:2.10.0
sinter add cats@2.13:2.10.0
```

Dependency format: `group::artifact[@scala-version][:version]`

- `cats`: Adds the latest version of cats-core for the project's Scala version
- `org.typelevel::cats-core_2.13:2.10.0`: Full specification with group, artifact, Scala version, and version
- `cats@2.13:2.10.0`: Short form with Scala version and version

## Configuration

Project configuration is stored in `Sinter.toml`:

```toml
[package]
name = "my-project"
version = "0.1.0"
main = "Main"
scala_version = "2.13"
source_dir = "src/main/scala"
target_dir = "target"

[dependencies]
"org.typelevel::cats-core_2.13" = "2.10.0"
```

## Troubleshooting

### Common Issues

- **Scala CLI not found**: Make sure Scala CLI is installed and available in your PATH
- **Build fails**: Check that all dependencies are correctly specified in `Sinter.toml`
- **Run fails**: Ensure your main file has a proper entry point (extends App or has a main method)

### Getting More Help

- Run `sinter --help` for command overview
- Check the [Scala CLI documentation](https://scala-cli.virtuslab.org/) for Scala-specific issues
- Report issues on the [GitHub repository](https://github.com/yourusername/sinter)

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

===== FILE: README_CN.md =====
# Sinter

ä¸€ä¸ªç±»ä¼¼ Cargo çš„ Scala é¡¹ç›®æ„å»ºå·¥å…·ã€‚

ğŸ“– **æ–‡æ¡£**: [English](README.md) | [ä¸­æ–‡](README_CN.md)

## åŠŸèƒ½ç‰¹æ€§

- ä½¿ç”¨ `sinter new <name>` åˆå§‹åŒ–é¡¹ç›®
- ä½¿ç”¨ `sinter build` æ„å»º Scala é¡¹ç›®
- ä½¿ç”¨ `sinter run` è¿è¡Œ Scala åº”ç”¨ç¨‹åº
- ä½¿ç”¨ `sinter add <dep>` æ·»åŠ ä¾èµ–
- é€šè¿‡ `Sinter.toml` é…ç½®é¡¹ç›®è®¾ç½®

## å¿«é€Ÿå¼€å§‹

```bash
# åˆ›å»ºæ–°é¡¹ç›®
sinter new hello-scala
cd hello-scala

# æ·»åŠ ä¾èµ–
sinter add cats

# æ„å»ºå¹¶è¿è¡Œ
sinter build
sinter run
```

## å®‰è£…

### ä»æºç å®‰è£…

```bash
git clone https://github.com/yourusername/sinter.git
cd sinter
cargo build --release
# å°† target/release/sinter æ·»åŠ åˆ° PATH
```

### å‰ç½®è¦æ±‚

- Rustï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
- Scala CLIï¼ˆç”¨äº Scala ç¼–è¯‘å’Œæ‰§è¡Œï¼‰

## ä½¿ç”¨æ–¹æ³•

### è·å–å¸®åŠ©

```bash
sinter --help          # æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤
sinter [command] --help # æ˜¾ç¤ºç‰¹å®šå‘½ä»¤çš„å¸®åŠ©
```

### åˆ›å»ºæ–°é¡¹ç›®

```bash
sinter new my-scala-project
cd my-scala-project
```

è¿™å°†åˆ›å»ºä¸€ä¸ªå…·æœ‰ä»¥ä¸‹ç»“æ„çš„ Scala é¡¹ç›®ï¼š
```
my-scala-project/
â”œâ”€â”€ Sinter.toml          # é¡¹ç›®é…ç½®
â””â”€â”€ src/main/scala/
    â””â”€â”€ Main.scala       # ä¸»åº”ç”¨ç¨‹åºæ–‡ä»¶
```

### æ„å»ºé¡¹ç›®

```bash
sinter build
```

ç¼–è¯‘ `src/main/scala` ä¸­çš„æ‰€æœ‰ Scala æºä»£ç ï¼Œå¹¶å°†ç¼–è¯‘åçš„ç±»æ”¾åœ¨ `Sinter.toml` ä¸­æŒ‡å®šçš„ `target_dir`ã€‚

### è¿è¡Œé¡¹ç›®

```bash
sinter run
sinter run path/to/MyFile.scala
sinter run --lib
```

- æ— å‚æ•°ï¼šè¿è¡Œ `Sinter.toml` ä¸­æŒ‡å®šçš„ä¸»æ–‡ä»¶
- æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼šè¿è¡ŒæŒ‡å®šçš„ Scala æ–‡ä»¶
- `--lib`ï¼šå¼ºåˆ¶åº“æ¨¡å¼ï¼ˆä»…ç¼–è¯‘ï¼Œä¸æ‰§è¡Œï¼‰

### æ·»åŠ ä¾èµ–

```bash
sinter add cats
sinter add org.typelevel::cats-core_2.13:2.10.0
sinter add cats@2.13:2.10.0
```

ä¾èµ–æ ¼å¼ï¼š`group::artifact[@scala-version][:version]`

- `cats`ï¼šä¸ºé¡¹ç›® Scala ç‰ˆæœ¬æ·»åŠ æœ€æ–°ç‰ˆæœ¬çš„ cats-core
- `org.typelevel::cats-core_2.13:2.10.0`ï¼šå®Œæ•´è§„èŒƒï¼ŒåŒ…æ‹¬ç»„ã€åˆ¶å“ã€Scala ç‰ˆæœ¬å’Œç‰ˆæœ¬
- `cats@2.13:2.10.0`ï¼šç®€çŸ­å½¢å¼ï¼ŒåŒ…å« Scala ç‰ˆæœ¬å’Œç‰ˆæœ¬

## é…ç½®

é¡¹ç›®é…ç½®å­˜å‚¨åœ¨ `Sinter.toml` ä¸­ï¼š

```toml
[package]
name = "my-project"
version = "0.1.0"
main = "Main"
scala_version = "2.13"
source_dir = "src/main/scala"
target_dir = "target"

[dependencies]
"org.typelevel::cats-core_2.13" = "2.10.0"
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

- **æ‰¾ä¸åˆ° Scala CLI**ï¼šç¡®ä¿ Scala CLI å·²å®‰è£…å¹¶åœ¨ PATH ä¸­å¯ç”¨
- **æ„å»ºå¤±è´¥**ï¼šæ£€æŸ¥ `Sinter.toml` ä¸­çš„æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£ç¡®æŒ‡å®š
- **è¿è¡Œå¤±è´¥**ï¼šç¡®ä¿ä¸»æ–‡ä»¶å…·æœ‰æ­£ç¡®çš„å…¥å£ç‚¹ï¼ˆextends App æˆ–å…·æœ‰ main æ–¹æ³•ï¼‰

### è·å–æ›´å¤šå¸®åŠ©

- è¿è¡Œ `sinter --help` è·å–å‘½ä»¤æ¦‚è§ˆ
- æŸ¥çœ‹ [Scala CLI æ–‡æ¡£](https://scala-cli.virtuslab.org/) äº†è§£ Scala ç›¸å…³é—®é¢˜
- åœ¨ [GitHub ä»“åº“](https://github.com/yourusername/sinter) ä¸ŠæŠ¥å‘Šé—®é¢˜

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

===== FILE: Cargo.lock =====
# This file is automatically @generated by Cargo.
# It is not intended for manual editing.
version = 4

[[package]]
name = "ahash"
version = "0.8.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5a15f179cd60c4584b8a8c596927aadc462e27f2ca70c04e0071964a73ba7a75"
dependencies = [
 "cfg-if",
 "once_cell",
 "version_check",
 "zerocopy",
]

[[package]]
name = "allocator-api2"
version = "0.2.21"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "683d7910e743518b0e34f1186f92494becacb047c7b6bf616c96772180fef923"

[[package]]
name = "anstream"
version = "0.6.21"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "43d5b281e737544384e969a5ccad3f1cdd24b48086a0fc1b2a5262a26b8f4f4a"
dependencies = [
 "anstyle",
 "anstyle-parse",
 "anstyle-query",
 "anstyle-wincon",
 "colorchoice",
 "is_terminal_polyfill",
 "utf8parse",
]

[[package]]
name = "anstyle"
version = "1.0.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5192cca8006f1fd4f7237516f40fa183bb07f8fbdfedaa0036de5ea9b0b45e78"

[[package]]
name = "anstyle-parse"
version = "0.2.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4e7644824f0aa2c7b9384579234ef10eb7efb6a0deb83f9630a49594dd9c15c2"
dependencies = [
 "utf8parse",
]

[[package]]
name = "anstyle-query"
version = "1.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "40c48f72fd53cd289104fc64099abca73db4166ad86ea0b4341abe65af83dadc"
dependencies = [
 "windows-sys 0.61.2",
]

[[package]]
name = "anstyle-wincon"
version = "3.0.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "291e6a250ff86cd4a820112fb8898808a366d8f9f58ce16d1f538353ad55747d"
dependencies = [
 "anstyle",
 "once_cell_polyfill",
 "windows-sys 0.61.2",
]

[[package]]
name = "anyhow"
version = "1.0.100"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a23eb6b1614318a8071c9b2521f36b424b2c83db5eb3a0fead4a6c0809af6e61"

[[package]]
name = "arraydeque"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7d902e3d592a523def97af8f317b08ce16b7ab854c1985a0c671e6f15cebc236"

[[package]]
name = "async-trait"
version = "0.1.89"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9035ad2d096bed7955a320ee7e2230574d28fd3c3a0f186cbea1ff3c7eed5dbb"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "atomic-waker"
version = "1.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1505bd5d3d116872e7271a6d4e16d81d0c8570876c8de68093a09ac269d8aac0"

[[package]]
name = "base64"
version = "0.21.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9d297deb1925b89f2ccc13d7635fa0714f12c87adce1c75356b39ca9b7178567"

[[package]]
name = "base64"
version = "0.22.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72b3254f16251a8381aa12e40e3c4d2f0199f8c6508fbecb9d91f575e0fbb8c6"

[[package]]
name = "bitflags"
version = "2.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "812e12b5285cc515a9c72a5c1d3b6d46a19dac5acfef5265968c166106e31dd3"
dependencies = [
 "serde_core",
]

[[package]]
name = "block-buffer"
version = "0.10.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3078c7629b62d3f0439517fa394996acacc5cbc91c5a20d8c658e77abd503a71"
dependencies = [
 "generic-array",
]

[[package]]
name = "bumpalo"
version = "3.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "46c5e41b57b8bba42a04676d81cb89e9ee8e859a1a66f80a5a72e1cb76b34d43"

[[package]]
name = "bytes"
version = "1.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d71b6127be86fdcfddb610f7182ac57211d4b18a3e9c82eb2d17662f2227ad6a"

[[package]]
name = "cc"
version = "1.2.46"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b97463e1064cb1b1c1384ad0a0b9c8abd0988e2a91f52606c80ef14aadb63e36"
dependencies = [
 "find-msvc-tools",
 "shlex",
]

[[package]]
name = "cfg-if"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9330f8b2ff13f34540b44e946ef35111825727b38d33286ef986142615121801"

[[package]]
name = "clap"
version = "4.5.53"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c9e340e012a1bf4935f5282ed1436d1489548e8f72308207ea5df0e23d2d03f8"
dependencies = [
 "clap_builder",
 "clap_derive",
]

[[package]]
name = "clap_builder"
version = "4.5.53"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d76b5d13eaa18c901fd2f7fca939fefe3a0727a953561fefdf3b2922b8569d00"
dependencies = [
 "anstream",
 "anstyle",
 "clap_lex",
 "strsim",
]

[[package]]
name = "clap_derive"
version = "4.5.49"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2a0b5487afeab2deb2ff4e03a807ad1a03ac532ff5a2cee5d86884440c7f7671"
dependencies = [
 "heck",
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "clap_lex"
version = "0.7.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a1d728cc89cf3aee9ff92b05e62b19ee65a02b5702cff7d5a377e32c6ae29d8d"

[[package]]
name = "colorchoice"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b05b61dc5112cbb17e4b6cd61790d9845d13888356391624cbe7e41efeac1e75"

[[package]]
name = "config"
version = "0.14.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68578f196d2a33ff61b27fae256c3164f65e36382648e30666dde05b8cc9dfdf"
dependencies = [
 "async-trait",
 "convert_case",
 "json5",
 "nom",
 "pathdiff",
 "ron",
 "rust-ini",
 "serde",
 "serde_json",
 "toml",
 "yaml-rust2",
]

[[package]]
name = "const-random"
version = "0.1.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87e00182fe74b066627d63b85fd550ac2998d4b0bd86bfed477a0ae4c7c71359"
dependencies = [
 "const-random-macro",
]

[[package]]
name = "const-random-macro"
version = "0.1.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f9d839f2a20b0aee515dc581a6172f2321f96cab76c1a38a4c584a194955390e"
dependencies = [
 "getrandom 0.2.16",
 "once_cell",
 "tiny-keccak",
]

[[package]]
name = "convert_case"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ec182b0ca2f35d8fc196cf3404988fd8b8c739a4d270ff118a398feb0cbec1ca"
dependencies = [
 "unicode-segmentation",
]

[[package]]
name = "core-foundation"
version = "0.9.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "91e195e091a93c46f7102ec7818a2aa394e1e1771c3ab4825963fa03e45afb8f"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "core-foundation-sys"
version = "0.8.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "773648b94d0e5d620f64f280777445740e61fe701025087ec8b57f45c791888b"

[[package]]
name = "cpufeatures"
version = "0.2.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "59ed5838eebb26a2bb2e58f6d5b5316989ae9d08bab10e0e6d103e656d1b0280"
dependencies = [
 "libc",
]

[[package]]
name = "crunchy"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "460fbee9c2c2f33933d720630a6a0bac33ba7053db5344fac858d4b8952d77d5"

[[package]]
name = "crypto-common"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78c8292055d1c1df0cce5d180393dc8cce0abec0a7102adb6c7b1eef6016d60a"
dependencies = [
 "generic-array",
 "typenum",
]

[[package]]
name = "digest"
version = "0.10.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ed9a281f7bc9b7576e61468ba615a66a5c8cfdff42420a70aa82701a3b1e292"
dependencies = [
 "block-buffer",
 "crypto-common",
]

[[package]]
name = "dirs"
version = "5.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "44c45a9d03d6676652bcb5e724c7e988de1acad23a711b5217ab9cbecbec2225"
dependencies = [
 "dirs-sys",
]

[[package]]
name = "dirs-sys"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "520f05a5cbd335fae5a99ff7a6ab8627577660ee5cfd6a94a6a929b52ff0321c"
dependencies = [
 "libc",
 "option-ext",
 "redox_users",
 "windows-sys 0.48.0",
]

[[package]]
name = "displaydoc"
version = "0.2.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "97369cbbc041bc366949bc74d34658d6cda5621039731c6310521892a3a20ae0"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "dlv-list"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "442039f5147480ba31067cb00ada1adae6892028e40e45fc5de7b7df6dcc1b5f"
dependencies = [
 "const-random",
]

[[package]]
name = "encoding_rs"
version = "0.8.35"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75030f3c4f45dafd7586dd6780965a8c7e8e285a5ecb86713e63a79c5b2766f3"
dependencies = [
 "cfg-if",
]

[[package]]
name = "equivalent"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "877a4ace8713b0bcf2a4e7eec82529c029f1d0619886d18145fea96c3ffe5c0f"

[[package]]
name = "errno"
version = "0.3.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "39cab71617ae0d63f51a36d69f866391735b51691dbda63cf6f96d042b63efeb"
dependencies = [
 "libc",
 "windows-sys 0.61.2",
]

[[package]]
name = "fastrand"
version = "2.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "37909eebbb50d72f9059c3b6d82c0463f2ff062c9e95845c43a6c9c0355411be"

[[package]]
name = "find-msvc-tools"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3a3076410a55c90011c298b04d0cfa770b00fa04e1e3c97d3f6c9de105a03844"

[[package]]
name = "fnv"
version = "1.0.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f9eec918d3f24069decb9af1554cad7c880e2da24a9afd88aca000531ab82c1"

[[package]]
name = "foreign-types"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f6f339eb8adc052cd2ca78910fda869aefa38d22d5cb648e6485e4d3fc06f3b1"
dependencies = [
 "foreign-types-shared",
]

[[package]]
name = "foreign-types-shared"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "00b0228411908ca8685dba7fc2cdd70ec9990a6e753e89b6ac91a84c40fbaf4b"

[[package]]
name = "form_urlencoded"
version = "1.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cb4cb245038516f5f85277875cdaa4f7d2c9a0fa0468de06ed190163b1581fcf"
dependencies = [
 "percent-encoding",
]

[[package]]
name = "futures-channel"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2dff15bf788c671c1934e366d07e30c1814a8ef514e1af724a602e8a2fbe1b10"
dependencies = [
 "futures-core",
]

[[package]]
name = "futures-core"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "05f29059c0c2090612e8d742178b0580d2dc940c837851ad723096f87af6663e"

[[package]]
name = "futures-sink"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e575fab7d1e0dcb8d0c7bcf9a63ee213816ab51902e6d244a95819acacf1d4f7"

[[package]]
name = "futures-task"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f90f7dce0722e95104fcb095585910c0977252f286e354b5e3bd38902cd99988"

[[package]]
name = "futures-util"
version = "0.3.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9fa08315bb612088cc391249efdc3bc77536f16c91f6cf495e6fbe85b20a4a81"
dependencies = [
 "futures-core",
 "futures-task",
 "pin-project-lite",
 "pin-utils",
]

[[package]]
name = "generic-array"
version = "0.14.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "85649ca51fd72272d7821adaf274ad91c288277713d9c18820d8499a7ff69e9a"
dependencies = [
 "typenum",
 "version_check",
]

[[package]]
name = "getrandom"
version = "0.2.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "335ff9f135e4384c8150d6f27c6daed433577f86b4750418338c01a1a2528592"
dependencies = [
 "cfg-if",
 "libc",
 "wasi",
]

[[package]]
name = "getrandom"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "899def5c37c4fd7b2664648c28120ecec138e4d395b459e5ca34f9cce2dd77fd"
dependencies = [
 "cfg-if",
 "libc",
 "r-efi",
 "wasip2",
]

[[package]]
name = "h2"
version = "0.4.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f3c0b69cfcb4e1b9f1bf2f53f95f766e4661169728ec61cd3fe5a0166f2d1386"
dependencies = [
 "atomic-waker",
 "bytes",
 "fnv",
 "futures-core",
 "futures-sink",
 "http",
 "indexmap",
 "slab",
 "tokio",
 "tokio-util",
 "tracing",
]

[[package]]
name = "hashbrown"
version = "0.14.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e5274423e17b7c9fc20b6e7e208532f9b19825d82dfd615708b70edd83df41f1"
dependencies = [
 "ahash",
 "allocator-api2",
]

[[package]]
name = "hashbrown"
version = "0.16.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5419bdc4f6a9207fbeba6d11b604d481addf78ecd10c11ad51e76c2f6482748d"

[[package]]
name = "hashlink"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e8094feaf31ff591f651a2664fb9cfd92bba7a60ce3197265e9482ebe753c8f7"
dependencies = [
 "hashbrown 0.14.5",
]

[[package]]
name = "heck"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2304e00983f87ffb38b55b444b5e3b60a884b5d30c0fca7d82fe33449bbe55ea"

[[package]]
name = "http"
version = "1.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f4a85d31aea989eead29a3aaf9e1115a180df8282431156e533de47660892565"
dependencies = [
 "bytes",
 "fnv",
 "itoa",
]

[[package]]
name = "http-body"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1efedce1fb8e6913f23e0c92de8e62cd5b772a67e7b3946df930a62566c93184"
dependencies = [
 "bytes",
 "http",
]

[[package]]
name = "http-body-util"
version = "0.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b021d93e26becf5dc7e1b75b1bed1fd93124b374ceb73f43d4d4eafec896a64a"
dependencies = [
 "bytes",
 "futures-core",
 "http",
 "http-body",
 "pin-project-lite",
]

[[package]]
name = "httparse"
version = "1.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6dbf3de79e51f3d586ab4cb9d5c3e2c14aa28ed23d180cf89b4df0454a69cc87"

[[package]]
name = "hyper"
version = "1.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2ab2d4f250c3d7b1c9fcdff1cece94ea4e2dfbec68614f7b87cb205f24ca9d11"
dependencies = [
 "atomic-waker",
 "bytes",
 "futures-channel",
 "futures-core",
 "h2",
 "http",
 "http-body",
 "httparse",
 "itoa",
 "pin-project-lite",
 "pin-utils",
 "smallvec",
 "tokio",
 "want",
]

[[package]]
name = "hyper-rustls"
version = "0.27.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e3c93eb611681b207e1fe55d5a71ecf91572ec8a6705cdb6857f7d8d5242cf58"
dependencies = [
 "http",
 "hyper",
 "hyper-util",
 "rustls",
 "rustls-pki-types",
 "tokio",
 "tokio-rustls",
 "tower-service",
]

[[package]]
name = "hyper-tls"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "70206fc6890eaca9fde8a0bf71caa2ddfc9fe045ac9e5c70df101a7dbde866e0"
dependencies = [
 "bytes",
 "http-body-util",
 "hyper",
 "hyper-util",
 "native-tls",
 "tokio",
 "tokio-native-tls",
 "tower-service",
]

[[package]]
name = "hyper-util"
version = "0.1.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "52e9a2a24dc5c6821e71a7030e1e14b7b632acac55c40e9d2e082c621261bb56"
dependencies = [
 "base64 0.22.1",
 "bytes",
 "futures-channel",
 "futures-core",
 "futures-util",
 "http",
 "http-body",
 "hyper",
 "ipnet",
 "libc",
 "percent-encoding",
 "pin-project-lite",
 "socket2",
 "system-configuration",
 "tokio",
 "tower-service",
 "tracing",
 "windows-registry",
]

[[package]]
name = "icu_collections"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4c6b649701667bbe825c3b7e6388cb521c23d88644678e83c0c4d0a621a34b43"
dependencies = [
 "displaydoc",
 "potential_utf",
 "yoke",
 "zerofrom",
 "zerovec",
]

[[package]]
name = "icu_locale_core"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "edba7861004dd3714265b4db54a3c390e880ab658fec5f7db895fae2046b5bb6"
dependencies = [
 "displaydoc",
 "litemap",
 "tinystr",
 "writeable",
 "zerovec",
]

[[package]]
name = "icu_normalizer"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5f6c8828b67bf8908d82127b2054ea1b4427ff0230ee9141c54251934ab1b599"
dependencies = [
 "icu_collections",
 "icu_normalizer_data",
 "icu_properties",
 "icu_provider",
 "smallvec",
 "zerovec",
]

[[package]]
name = "icu_normalizer_data"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7aedcccd01fc5fe81e6b489c15b247b8b0690feb23304303a9e560f37efc560a"

[[package]]
name = "icu_properties"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e93fcd3157766c0c8da2f8cff6ce651a31f0810eaa1c51ec363ef790bbb5fb99"
dependencies = [
 "icu_collections",
 "icu_locale_core",
 "icu_properties_data",
 "icu_provider",
 "zerotrie",
 "zerovec",
]

[[package]]
name = "icu_properties_data"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "02845b3647bb045f1100ecd6480ff52f34c35f82d9880e029d329c21d1054899"

[[package]]
name = "icu_provider"
version = "2.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "85962cf0ce02e1e0a629cc34e7ca3e373ce20dda4c4d7294bbd0bf1fdb59e614"
dependencies = [
 "displaydoc",
 "icu_locale_core",
 "writeable",
 "yoke",
 "zerofrom",
 "zerotrie",
 "zerovec",
]

[[package]]
name = "idna"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b0875f23caa03898994f6ddc501886a45c7d3d62d04d2d90788d47be1b1e4de"
dependencies = [
 "idna_adapter",
 "smallvec",
 "utf8_iter",
]

[[package]]
name = "idna_adapter"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3acae9609540aa318d1bc588455225fb2085b9ed0c4f6bd0d9d5bcd86f1a0344"
dependencies = [
 "icu_normalizer",
 "icu_properties",
]

[[package]]
name = "indexmap"
version = "2.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6717a8d2a5a929a1a2eb43a12812498ed141a0bcfb7e8f7844fbdbe4303bba9f"
dependencies = [
 "equivalent",
 "hashbrown 0.16.0",
]

[[package]]
name = "inventory"
version = "0.3.21"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bc61209c082fbeb19919bee74b176221b27223e27b65d781eb91af24eb1fb46e"
dependencies = [
 "rustversion",
]

[[package]]
name = "ipnet"
version = "2.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "469fb0b9cefa57e3ef31275ee7cacb78f2fdca44e4765491884a2b119d4eb130"

[[package]]
name = "iri-string"
version = "0.7.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4f867b9d1d896b67beb18518eda36fdb77a32ea590de864f1325b294a6d14397"
dependencies = [
 "memchr",
 "serde",
]

[[package]]
name = "is_terminal_polyfill"
version = "1.70.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a6cb138bb79a146c1bd460005623e142ef0181e3d0219cb493e02f7d08a35695"

[[package]]
name = "itoa"
version = "1.0.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4a5f13b858c8d314ee3e8f639011f7ccefe71f97f96e50151fb991f267928e2c"

[[package]]
name = "js-sys"
version = "0.3.82"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b011eec8cc36da2aab2d5cff675ec18454fad408585853910a202391cf9f8e65"
dependencies = [
 "once_cell",
 "wasm-bindgen",
]

[[package]]
name = "json5"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "96b0db21af676c1ce64250b5f40f3ce2cf27e4e47cb91ed91eb6fe9350b430c1"
dependencies = [
 "pest",
 "pest_derive",
 "serde",
]

[[package]]
name = "lazy_static"
version = "1.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbd2bcb4c963f2ddae06a2efc7e9f3591312473c50c6685e1f298068316e66fe"

[[package]]
name = "libc"
version = "0.2.177"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2874a2af47a2325c2001a6e6fad9b16a53b802102b528163885171cf92b15976"

[[package]]
name = "libredox"
version = "0.1.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "416f7e718bdb06000964960ffa43b4335ad4012ae8b99060261aa4a8088d5ccb"
dependencies = [
 "bitflags",
 "libc",
]

[[package]]
name = "linux-raw-sys"
version = "0.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df1d3c3b53da64cf5760482273a98e575c651a67eec7f77df96b5b642de8f039"

[[package]]
name = "litemap"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6373607a59f0be73a39b6fe456b8192fcc3585f602af20751600e974dd455e77"

[[package]]
name = "lock_api"
version = "0.4.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "224399e74b87b5f3557511d98dff8b14089b3dadafcab6bb93eab67d3aace965"
dependencies = [
 "scopeguard",
]

[[package]]
name = "log"
version = "0.4.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "34080505efa8e45a4b816c349525ebe327ceaa8559756f0356cba97ef3bf7432"

[[package]]
name = "memchr"
version = "2.7.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f52b00d39961fc5b2736ea853c9cc86238e165017a493d1d5c8eac6bdc4cc273"

[[package]]
name = "mime"
version = "0.3.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6877bb514081ee2a7ff5ef9de3281f14a4dd4bceac4c09388074a6b5df8a139a"

[[package]]
name = "minimal-lexical"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68354c5c6bd36d73ff3feceb05efa59b6acb7626617f4962be322a825e61f79a"

[[package]]
name = "mio"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "69d83b0086dc8ecf3ce9ae2874b2d1290252e2a30720bea58a5c6639b0092873"
dependencies = [
 "libc",
 "wasi",
 "windows-sys 0.61.2",
]

[[package]]
name = "native-tls"
version = "0.2.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87de3442987e9dbec73158d5c715e7ad9072fda936bb03d19d7fa10e00520f0e"
dependencies = [
 "libc",
 "log",
 "openssl",
 "openssl-probe",
 "openssl-sys",
 "schannel",
 "security-framework",
 "security-framework-sys",
 "tempfile",
]

[[package]]
name = "nom"
version = "7.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d273983c5a657a70a3e8f2a01329822f3b8c8172b73826411a55751e404a0a4a"
dependencies = [
 "memchr",
 "minimal-lexical",
]

[[package]]
name = "once_cell"
version = "1.21.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "42f5e15c9953c5e4ccceeb2e7382a716482c34515315f7b03532b8b4e8393d2d"

[[package]]
name = "once_cell_polyfill"
version = "1.70.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "384b8ab6d37215f3c5301a95a4accb5d64aa607f1fcb26a11b5303878451b4fe"

[[package]]
name = "openssl"
version = "0.10.75"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08838db121398ad17ab8531ce9de97b244589089e290a384c900cb9ff7434328"
dependencies = [
 "bitflags",
 "cfg-if",
 "foreign-types",
 "libc",
 "once_cell",
 "openssl-macros",
 "openssl-sys",
]

[[package]]
name = "openssl-macros"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a948666b637a0f465e8564c73e89d4dde00d72d4d473cc972f390fc3dcee7d9c"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "openssl-probe"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d05e27ee213611ffe7d6348b942e8f942b37114c00cc03cec254295a4a17852e"

[[package]]
name = "openssl-sys"
version = "0.9.111"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "82cab2d520aa75e3c58898289429321eb788c3106963d0dc886ec7a5f4adc321"
dependencies = [
 "cc",
 "libc",
 "pkg-config",
 "vcpkg",
]

[[package]]
name = "option-ext"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04744f49eae99ab78e0d5c0b603ab218f515ea8cfe5a456d7629ad883a3b6e7d"

[[package]]
name = "ordered-multimap"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49203cdcae0030493bad186b28da2fa25645fa276a51b6fec8010d281e02ef79"
dependencies = [
 "dlv-list",
 "hashbrown 0.14.5",
]

[[package]]
name = "parking_lot"
version = "0.12.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "93857453250e3077bd71ff98b6a65ea6621a19bb0f559a85248955ac12c45a1a"
dependencies = [
 "lock_api",
 "parking_lot_core",
]

[[package]]
name = "parking_lot_core"
version = "0.9.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2621685985a2ebf1c516881c026032ac7deafcda1a2c9b7850dc81e3dfcb64c1"
dependencies = [
 "cfg-if",
 "libc",
 "redox_syscall",
 "smallvec",
 "windows-link",
]

[[package]]
name = "paste"
version = "1.0.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "57c0d7b74b563b49d38dae00a0c37d4d6de9b432382b2892f0574ddcae73fd0a"

[[package]]
name = "pathdiff"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df94ce210e5bc13cb6651479fa48d14f601d9858cfe0467f43ae157023b938d3"

[[package]]
name = "percent-encoding"
version = "2.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9b4f627cb1b25917193a259e49bdad08f671f8d9708acfd5fe0a8c1455d87220"

[[package]]
name = "pest"
version = "2.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "989e7521a040efde50c3ab6bbadafbe15ab6dc042686926be59ac35d74607df4"
dependencies = [
 "memchr",
 "ucd-trie",
]

[[package]]
name = "pest_derive"
version = "2.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "187da9a3030dbafabbbfb20cb323b976dc7b7ce91fcd84f2f74d6e31d378e2de"
dependencies = [
 "pest",
 "pest_generator",
]

[[package]]
name = "pest_generator"
version = "2.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49b401d98f5757ebe97a26085998d6c0eecec4995cad6ab7fc30ffdf4b052843"
dependencies = [
 "pest",
 "pest_meta",
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "pest_meta"
version = "2.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72f27a2cfee9f9039c4d86faa5af122a0ac3851441a34865b8a043b46be0065a"
dependencies = [
 "pest",
 "sha2",
]

[[package]]
name = "pin-project-lite"
version = "0.2.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b3cff922bd51709b605d9ead9aa71031d81447142d828eb4a6eba76fe619f9b"

[[package]]
name = "pin-utils"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b870d8c151b6f2fb93e84a13146138f05d02ed11c7e7c54f8826aaaf7c9f184"

[[package]]
name = "pkg-config"
version = "0.3.32"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7edddbd0b52d732b21ad9a5fab5c704c14cd949e5e9a1ec5929a24fded1b904c"

[[package]]
name = "potential_utf"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b73949432f5e2a09657003c25bca5e19a0e9c84f8058ca374f49e0ebe605af77"
dependencies = [
 "zerovec",
]

[[package]]
name = "proc-macro2"
version = "1.0.103"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5ee95bc4ef87b8d5ba32e8b7714ccc834865276eab0aed5c9958d00ec45f49e8"
dependencies = [
 "unicode-ident",
]

[[package]]
name = "quote"
version = "1.0.42"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a338cc41d27e6cc6dce6cefc13a0729dfbb81c262b1f519331575dd80ef3067f"
dependencies = [
 "proc-macro2",
]

[[package]]
name = "r-efi"
version = "5.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "69cdb34c158ceb288df11e18b4bd39de994f6657d83847bdffdbd7f346754b0f"

[[package]]
name = "redox_syscall"
version = "0.5.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed2bf2547551a7053d6fdfafda3f938979645c44812fbfcda098faae3f1a362d"
dependencies = [
 "bitflags",
]

[[package]]
name = "redox_users"
version = "0.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ba009ff324d1fc1b900bd1fdb31564febe58a8ccc8a6fdbb93b543d33b13ca43"
dependencies = [
 "getrandom 0.2.16",
 "libredox",
 "thiserror",
]

[[package]]
name = "reqwest"
version = "0.12.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9d0946410b9f7b082a427e4ef5c8ff541a88b357bc6c637c40db3a68ac70a36f"
dependencies = [
 "base64 0.22.1",
 "bytes",
 "encoding_rs",
 "futures-core",
 "h2",
 "http",
 "http-body",
 "http-body-util",
 "hyper",
 "hyper-rustls",
 "hyper-tls",
 "hyper-util",
 "js-sys",
 "log",
 "mime",
 "native-tls",
 "percent-encoding",
 "pin-project-lite",
 "rustls-pki-types",
 "serde",
 "serde_json",
 "serde_urlencoded",
 "sync_wrapper",
 "tokio",
 "tokio-native-tls",
 "tower",
 "tower-http",
 "tower-service",
 "url",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
]

[[package]]
name = "ring"
version = "0.17.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a4689e6c2294d81e88dc6261c768b63bc4fcdb852be6d1352498b114f61383b7"
dependencies = [
 "cc",
 "cfg-if",
 "getrandom 0.2.16",
 "libc",
 "untrusted",
 "windows-sys 0.52.0",
]

[[package]]
name = "ron"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b91f7eff05f748767f183df4320a63d6936e9c6107d97c9e6bdd9784f4289c94"
dependencies = [
 "base64 0.21.7",
 "bitflags",
 "serde",
 "serde_derive",
]

[[package]]
name = "rust-ini"
version = "0.20.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3e0698206bcb8882bf2a9ecb4c1e7785db57ff052297085a6efd4fe42302068a"
dependencies = [
 "cfg-if",
 "ordered-multimap",
]

[[package]]
name = "rustix"
version = "1.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cd15f8a2c5551a84d56efdc1cd049089e409ac19a3072d5037a17fd70719ff3e"
dependencies = [
 "bitflags",
 "errno",
 "libc",
 "linux-raw-sys",
 "windows-sys 0.61.2",
]

[[package]]
name = "rustls"
version = "0.23.35"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "533f54bc6a7d4f647e46ad909549eda97bf5afc1585190ef692b4286b198bd8f"
dependencies = [
 "once_cell",
 "rustls-pki-types",
 "rustls-webpki",
 "subtle",
 "zeroize",
]

[[package]]
name = "rustls-pki-types"
version = "1.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "94182ad936a0c91c324cd46c6511b9510ed16af436d7b5bab34beab0afd55f7a"
dependencies = [
 "zeroize",
]

[[package]]
name = "rustls-webpki"
version = "0.103.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2ffdfa2f5286e2247234e03f680868ac2815974dc39e00ea15adc445d0aafe52"
dependencies = [
 "ring",
 "rustls-pki-types",
 "untrusted",
]

[[package]]
name = "rustversion"
version = "1.0.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b39cdef0fa800fc44525c84ccb54a029961a8215f9619753635a9c0d2538d46d"

[[package]]
name = "ryu"
version = "1.0.20"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "28d3b2b1366ec20994f1fd18c3c594f05c5dd4bc44d8bb0c1c632c8d6829481f"

[[package]]
name = "sinter"
version = "0.1.0"
dependencies = [
 "anyhow",
 "async-trait",
 "clap",
 "config",
 "dirs",
 "inventory",
 "lazy_static",
 "paste",
 "reqwest",
 "serde",
 "serde_json",
 "tokio",
 "toml_edit",
]

[[package]]
name = "sinter-cli"
version = "0.1.0"
dependencies = [
 "anyhow",
 "sinter",
 "sinter-plugins",
 "tokio",
]

[[package]]
name = "sinter-plugin-api"
version = "0.1.0"
dependencies = [
 "anyhow",
 "async-trait",
 "clap",
 "sinter",
 "tokio",
]

[[package]]
name = "sinter-plugins"
version = "0.1.0"
dependencies = [
 "sinter-plugin-api",
]

[[package]]
name = "schannel"
version = "0.1.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "891d81b926048e76efe18581bf793546b4c0eaf8448d72be8de2bbee5fd166e1"
dependencies = [
 "windows-sys 0.61.2",
]

[[package]]
name = "scopeguard"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "94143f37725109f92c262ed2cf5e59bce7498c01bcc1502d7b9afe439a4e9f49"

[[package]]
name = "security-framework"
version = "2.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "897b2245f0b511c87893af39b033e5ca9cce68824c4d7e7630b5a1d339658d02"
dependencies = [
 "bitflags",
 "core-foundation",
 "core-foundation-sys",
 "libc",
 "security-framework-sys",
]

[[package]]
name = "security-framework-sys"
version = "2.15.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cc1f0cbffaac4852523ce30d8bd3c5cdc873501d96ff467ca09b6767bb8cd5c0"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "serde"
version = "1.0.228"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a8e94ea7f378bd32cbbd37198a4a91436180c5bb472411e48b5ec2e2124ae9e"
dependencies = [
 "serde_core",
 "serde_derive",
]

[[package]]
name = "serde_core"
version = "1.0.228"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "41d385c7d4ca58e59fc732af25c3983b67ac852c1a25000afe1175de458b67ad"
dependencies = [
 "serde_derive",
]

[[package]]
name = "serde_derive"
version = "1.0.228"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d540f220d3187173da220f885ab66608367b6574e925011a9353e4badda91d79"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "serde_json"
version = "1.0.145"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "402a6f66d8c709116cf22f558eab210f5a50187f702eb4d7e5ef38d9a7f1c79c"
dependencies = [
 "itoa",
 "memchr",
 "ryu",
 "serde",
 "serde_core",
]

[[package]]
name = "serde_spanned"
version = "0.6.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bf41e0cfaf7226dca15e8197172c295a782857fcb97fad1808a166870dee75a3"
dependencies = [
 "serde",
]

[[package]]
name = "serde_urlencoded"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d3491c14715ca2294c4d6a88f15e84739788c1d030eed8c110436aafdaa2f3fd"
dependencies = [
 "form_urlencoded",
 "itoa",
 "ryu",
 "serde",
]

[[package]]
name = "sha2"
version = "0.10.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a7507d819769d01a365ab707794a4084392c824f54a7a6a7862f8c3d0892b283"
dependencies = [
 "cfg-if",
 "cpufeatures",
 "digest",
]

[[package]]
name = "shlex"
version = "1.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fda2ff0d084019ba4d7c6f371c95d8fd75ce3524c3cb8fb653a3023f6323e64"

[[package]]
name = "signal-hook-registry"
version = "1.4.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b2a4719bff48cee6b39d12c020eeb490953ad2443b7055bd0b21fca26bd8c28b"
dependencies = [
 "libc",
]

[[package]]
name = "slab"
version = "0.4.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a2ae44ef20feb57a68b23d846850f861394c2e02dc425a50098ae8c90267589"

[[package]]
name = "smallvec"
version = "1.15.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "67b1b7a3b5fe4f1376887184045fcf45c69e92af734b7aaddc05fb777b6fbd03"

[[package]]
name = "socket2"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "17129e116933cf371d018bb80ae557e889637989d8638274fb25622827b03881"
dependencies = [
 "libc",
 "windows-sys 0.60.2",
]

[[package]]
name = "stable_deref_trait"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6ce2be8dc25455e1f91df71bfa12ad37d7af1092ae736f3a6cd0e37bc7810596"

[[package]]
name = "strsim"
version = "0.11.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7da8b5736845d9f2fcb837ea5d9e2628564b3b043a70948a3f0b778838c5fb4f"

[[package]]
name = "subtle"
version = "2.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "13c2bddecc57b384dee18652358fb23172facb8a2c51ccc10d74c157bdea3292"

[[package]]
name = "syn"
version = "2.0.109"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2f17c7e013e88258aa9543dcbe81aca68a667a9ac37cd69c9fbc07858bfe0e2f"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-ident",
]

[[package]]
name = "sync_wrapper"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0bf256ce5efdfa370213c1dabab5935a12e49f2c58d15e9eac2870d3b4f27263"
dependencies = [
 "futures-core",
]

[[package]]
name = "synstructure"
version = "0.13.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "728a70f3dbaf5bab7f0c4b1ac8d7ae5ea60a4b5549c8a5914361c99147a709d2"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "system-configuration"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c879d448e9d986b661742763247d3693ed13609438cf3d006f51f5368a5ba6b"
dependencies = [
 "bitflags",
 "core-foundation",
 "system-configuration-sys",
]

[[package]]
name = "system-configuration-sys"
version = "0.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e1d1b10ced5ca923a1fcb8d03e96b8d3268065d724548c0211415ff6ac6bac4"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "tempfile"
version = "3.23.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2d31c77bdf42a745371d260a26ca7163f1e0924b64afa0b688e61b5a9fa02f16"
dependencies = [
 "fastrand",
 "getrandom 0.3.4",
 "once_cell",
 "rustix",
 "windows-sys 0.61.2",
]

[[package]]
name = "thiserror"
version = "1.0.69"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b6aaf5339b578ea85b50e080feb250a3e8ae8cfcdff9a461c9ec2904bc923f52"
dependencies = [
 "thiserror-impl",
]

[[package]]
name = "thiserror-impl"
version = "1.0.69"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4fee6c4efc90059e10f81e6d42c60a18f76588c3d74cb83a0b242a2b6c7504c1"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "tiny-keccak"
version = "2.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2c9d3793400a45f954c52e73d068316d76b6f4e36977e3fcebb13a2721e80237"
dependencies = [
 "crunchy",
]

[[package]]
name = "tinystr"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "42d3e9c45c09de15d06dd8acf5f4e0e399e85927b7f00711024eb7ae10fa4869"
dependencies = [
 "displaydoc",
 "zerovec",
]

[[package]]
name = "tokio"
version = "1.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ff360e02eab121e0bc37a2d3b4d4dc622e6eda3a8e5253d5435ecf5bd4c68408"
dependencies = [
 "bytes",
 "libc",
 "mio",
 "parking_lot",
 "pin-project-lite",
 "signal-hook-registry",
 "socket2",
 "tokio-macros",
 "windows-sys 0.61.2",
]

[[package]]
name = "tokio-macros"
version = "2.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "af407857209536a95c8e56f8231ef2c2e2aff839b22e07a1ffcbc617e9db9fa5"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "tokio-native-tls"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bbae76ab933c85776efabc971569dd6119c580d8f5d448769dec1764bf796ef2"
dependencies = [
 "native-tls",
 "tokio",
]

[[package]]
name = "tokio-rustls"
version = "0.26.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1729aa945f29d91ba541258c8df89027d5792d85a8841fb65e8bf0f4ede4ef61"
dependencies = [
 "rustls",
 "tokio",
]

[[package]]
name = "tokio-util"
version = "0.7.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2efa149fe76073d6e8fd97ef4f4eca7b67f599660115591483572e406e165594"
dependencies = [
 "bytes",
 "futures-core",
 "futures-sink",
 "pin-project-lite",
 "tokio",
]

[[package]]
name = "toml"
version = "0.8.23"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc1beb996b9d83529a9e75c17a1686767d148d70663143c7854d8b4a09ced362"
dependencies = [
 "serde",
 "serde_spanned",
 "toml_datetime",
 "toml_edit",
]

[[package]]
name = "toml_datetime"
version = "0.6.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "22cddaf88f4fbc13c51aebbf5f8eceb5c7c5a9da2ac40a13519eb5b0a0e8f11c"
dependencies = [
 "serde",
]

[[package]]
name = "toml_edit"
version = "0.22.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "41fe8c660ae4257887cf66394862d21dbca4a6ddd26f04a3560410406a2f819a"
dependencies = [
 "indexmap",
 "serde",
 "serde_spanned",
 "toml_datetime",
 "toml_write",
 "winnow",
]

[[package]]
name = "toml_write"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5d99f8c9a7727884afe522e9bd5edbfc91a3312b36a77b5fb8926e4c31a41801"

[[package]]
name = "tower"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d039ad9159c98b70ecfd540b2573b97f7f52c3e8d9f8ad57a24b916a536975f9"
dependencies = [
 "futures-core",
 "futures-util",
 "pin-project-lite",
 "sync_wrapper",
 "tokio",
 "tower-layer",
 "tower-service",
]

[[package]]
name = "tower-http"
version = "0.6.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "adc82fd73de2a9722ac5da747f12383d2bfdb93591ee6c58486e0097890f05f2"
dependencies = [
 "bitflags",
 "bytes",
 "futures-util",
 "http",
 "http-body",
 "iri-string",
 "pin-project-lite",
 "tower",
 "tower-layer",
 "tower-service",
]

[[package]]
name = "tower-layer"
version = "0.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "121c2a6cda46980bb0fcd1647ffaf6cd3fc79a013de288782836f6df9c48780e"

[[package]]
name = "tower-service"
version = "0.3.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8df9b6e13f2d32c91b9bd719c00d1958837bc7dec474d94952798cc8e69eeec3"

[[package]]
name = "tracing"
version = "0.1.41"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "784e0ac535deb450455cbfa28a6f0df145ea1bb7ae51b821cf5e7927fdcfbdd0"
dependencies = [
 "pin-project-lite",
 "tracing-core",
]

[[package]]
name = "tracing-core"
version = "0.1.34"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b9d12581f227e93f094d3af2ae690a574abb8a2b9b7a96e7cfe9647b2b617678"
dependencies = [
 "once_cell",
]

[[package]]
name = "try-lock"
version = "0.2.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e421abadd41a4225275504ea4d6566923418b7f05506fbc9c0fe86ba7396114b"

[[package]]
name = "typenum"
version = "1.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "562d481066bde0658276a35467c4af00bdc6ee726305698a55b86e61d7ad82bb"

[[package]]
name = "ucd-trie"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2896d95c02a80c6d6a5d6e953d479f5ddf2dfdb6a244441010e373ac0fb88971"

[[package]]
name = "unicode-ident"
version = "1.0.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9312f7c4f6ff9069b165498234ce8be658059c6728633667c526e27dc2cf1df5"

[[package]]
name = "unicode-segmentation"
version = "1.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f6ccf251212114b54433ec949fd6a7841275f9ada20dddd2f29e9ceea4501493"

[[package]]
name = "untrusted"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8ecb6da28b8a351d773b68d5825ac39017e680750f980f3a1a85cd8dd28a47c1"

[[package]]
name = "url"
version = "2.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "08bc136a29a3d1758e07a9cca267be308aeebf5cfd5a10f3f67ab2097683ef5b"
dependencies = [
 "form_urlencoded",
 "idna",
 "percent-encoding",
 "serde",
]

[[package]]
name = "utf8_iter"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b6c140620e7ffbb22c2dee59cafe6084a59b5ffc27a8859a5f0d494b5d52b6be"

[[package]]
name = "utf8parse"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "06abde3611657adf66d383f00b093d7faecc7fa57071cce2578660c9f1010821"

[[package]]
name = "vcpkg"
version = "0.2.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "accd4ea62f7bb7a82fe23066fb0957d48ef677f6eeb8215f372f52e48bb32426"

[[package]]
name = "version_check"
version = "0.9.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b928f33d975fc6ad9f86c8f283853ad26bdd5b10b7f1542aa2fa15e2289105a"

[[package]]
name = "want"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bfa7760aed19e106de2c7c0b581b509f2f25d3dacaf737cb82ac61bc6d760b0e"
dependencies = [
 "try-lock",
]

[[package]]
name = "wasi"
version = "0.11.1+wasi-snapshot-preview1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ccf3ec651a847eb01de73ccad15eb7d99f80485de043efb2f370cd654f4ea44b"

[[package]]
name = "wasip2"
version = "1.0.1+wasi-0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0562428422c63773dad2c345a1882263bbf4d65cf3f42e90921f787ef5ad58e7"
dependencies = [
 "wit-bindgen",
]

[[package]]
name = "wasm-bindgen"
version = "0.2.105"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "da95793dfc411fbbd93f5be7715b0578ec61fe87cb1a42b12eb625caa5c5ea60"
dependencies = [
 "cfg-if",
 "once_cell",
 "rustversion",
 "wasm-bindgen-macro",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-futures"
version = "0.4.55"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "551f88106c6d5e7ccc7cd9a16f312dd3b5d36ea8b4954304657d5dfba115d4a0"
dependencies = [
 "cfg-if",
 "js-sys",
 "once_cell",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "wasm-bindgen-macro"
version = "0.2.105"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04264334509e04a7bf8690f2384ef5265f05143a4bff3889ab7a3269adab59c2"
dependencies = [
 "quote",
 "wasm-bindgen-macro-support",
]

[[package]]
name = "wasm-bindgen-macro-support"
version = "0.2.105"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "420bc339d9f322e562942d52e115d57e950d12d88983a14c79b86859ee6c7ebc"
dependencies = [
 "bumpalo",
 "proc-macro2",
 "quote",
 "syn",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-shared"
version = "0.2.105"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76f218a38c84bcb33c25ec7059b07847d465ce0e0a76b995e134a45adcb6af76"
dependencies = [
 "unicode-ident",
]

[[package]]
name = "web-sys"
version = "0.3.82"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3a1f95c0d03a47f4ae1f7a64643a6bb97465d9b740f0fa8f90ea33915c99a9a1"
dependencies = [
 "js-sys",
 "wasm-bindgen",
]

[[package]]
name = "windows-link"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f0805222e57f7521d6a62e36fa9163bc891acd422f971defe97d64e70d0a4fe5"

[[package]]
name = "windows-registry"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "02752bf7fbdcce7f2a27a742f798510f3e5ad88dbe84871e5168e2120c3d5720"
dependencies = [
 "windows-link",
 "windows-result",
 "windows-strings",
]

[[package]]
name = "windows-result"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7781fa89eaf60850ac3d2da7af8e5242a5ea78d1a11c49bf2910bb5a73853eb5"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-strings"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7837d08f69c77cf6b07689544538e017c1bfcf57e34b4c0ff58e6c2cd3b37091"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-sys"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "677d2418bec65e3338edb076e806bc1ec15693c5d0104683f2efe857f61056a9"
dependencies = [
 "windows-targets 0.48.5",
]

[[package]]
name = "windows-sys"
version = "0.52.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "282be5f36a8ce781fad8c8ae18fa3f9beff57ec1b52cb3de0789201425d9a33d"
dependencies = [
 "windows-targets 0.52.6",
]

[[package]]
name = "windows-sys"
version = "0.60.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f2f500e4d28234f72040990ec9d39e3a6b950f9f22d3dba18416c35882612bcb"
dependencies = [
 "windows-targets 0.53.5",
]

[[package]]
name = "windows-sys"
version = "0.61.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ae137229bcbd6cdf0f7b80a31df61766145077ddf49416a728b02cb3921ff3fc"
dependencies = [
 "windows-link",
]

[[package]]
name = "windows-targets"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a2fa6e2155d7247be68c096456083145c183cbbbc2764150dda45a87197940c"
dependencies = [
 "windows_aarch64_gnullvm 0.48.5",
 "windows_aarch64_msvc 0.48.5",
 "windows_i686_gnu 0.48.5",
 "windows_i686_msvc 0.48.5",
 "windows_x86_64_gnu 0.48.5",
 "windows_x86_64_gnullvm 0.48.5",
 "windows_x86_64_msvc 0.48.5",
]

[[package]]
name = "windows-targets"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9b724f72796e036ab90c1021d4780d4d3d648aca59e491e6b98e725b84e99973"
dependencies = [
 "windows_aarch64_gnullvm 0.52.6",
 "windows_aarch64_msvc 0.52.6",
 "windows_i686_gnu 0.52.6",
 "windows_i686_gnullvm 0.52.6",
 "windows_i686_msvc 0.52.6",
 "windows_x86_64_gnu 0.52.6",
 "windows_x86_64_gnullvm 0.52.6",
 "windows_x86_64_msvc 0.52.6",
]

[[package]]
name = "windows-targets"
version = "0.53.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4945f9f551b88e0d65f3db0bc25c33b8acea4d9e41163edf90dcd0b19f9069f3"
dependencies = [
 "windows-link",
 "windows_aarch64_gnullvm 0.53.1",
 "windows_aarch64_msvc 0.53.1",
 "windows_i686_gnu 0.53.1",
 "windows_i686_gnullvm 0.53.1",
 "windows_i686_msvc 0.53.1",
 "windows_x86_64_gnu 0.53.1",
 "windows_x86_64_gnullvm 0.53.1",
 "windows_x86_64_msvc 0.53.1",
]

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2b38e32f0abccf9987a4e3079dfb67dcd799fb61361e53e2882c3cbaf0d905d8"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "32a4622180e7a0ec044bb555404c800bc9fd9ec262ec147edd5989ccd0c02cd3"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a9d8416fa8b42f5c947f8482c43e7d89e73a173cead56d044f6a56104a6d1b53"

[[package]]
name = "windows_aarch64_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dc35310971f3b2dbbf3f0690a219f40e2d9afcf64f9ab7cc1be722937c26b4bc"

[[package]]
name = "windows_aarch64_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09ec2a7bb152e2252b53fa7803150007879548bc709c039df7627cabbd05d469"

[[package]]
name = "windows_aarch64_msvc"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b9d782e804c2f632e395708e99a94275910eb9100b2114651e04744e9b125006"

[[package]]
name = "windows_i686_gnu"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a75915e7def60c94dcef72200b9a8e58e5091744960da64ec734a6c6e9b3743e"

[[package]]
name = "windows_i686_gnu"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e9b5ad5ab802e97eb8e295ac6720e509ee4c243f69d781394014ebfe8bbfa0b"

[[package]]
name = "windows_i686_gnu"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "960e6da069d81e09becb0ca57a65220ddff016ff2d6af6a223cf372a506593a3"

[[package]]
name = "windows_i686_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0eee52d38c090b3caa76c563b86c3a4bd71ef1a819287c19d586d7334ae8ed66"

[[package]]
name = "windows_i686_gnullvm"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fa7359d10048f68ab8b09fa71c3daccfb0e9b559aed648a8f95469c27057180c"

[[package]]
name = "windows_i686_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f55c233f70c4b27f66c523580f78f1004e8b5a8b659e05a4eb49d4166cca406"

[[package]]
name = "windows_i686_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "240948bc05c5e7c6dabba28bf89d89ffce3e303022809e73deaefe4f6ec56c66"

[[package]]
name = "windows_i686_msvc"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1e7ac75179f18232fe9c285163565a57ef8d3c89254a30685b57d83a38d326c2"

[[package]]
name = "windows_x86_64_gnu"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "53d40abd2583d23e4718fddf1ebec84dbff8381c07cae67ff7768bbf19c6718e"

[[package]]
name = "windows_x86_64_gnu"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "147a5c80aabfbf0c7d901cb5895d1de30ef2907eb21fbbab29ca94c5b08b1a78"

[[package]]
name = "windows_x86_64_gnu"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9c3842cdd74a865a8066ab39c8a7a473c0778a3f29370b5fd6b4b9aa7df4a499"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0b7b52767868a23d5bab768e390dc5f5c55825b6d30b86c844ff2dc7414044cc"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "24d5b23dc417412679681396f2b49f3de8c1473deb516bd34410872eff51ed0d"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0ffa179e2d07eee8ad8f57493436566c7cc30ac536a3379fdf008f47f6bb7ae1"

[[package]]
name = "windows_x86_64_msvc"
version = "0.48.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed94fce61571a4006852b7389a063ab983c02eb1bb37b47f8272ce92d06d9538"

[[package]]
name = "windows_x86_64_msvc"
version = "0.52.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "589f6da84c646204747d1270a2a5661ea66ed1cced2631d546fdfb155959f9ec"

[[package]]
name = "windows_x86_64_msvc"
version = "0.53.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d6bbff5f0aada427a1e5a6da5f1f98158182f26556f345ac9e04d36d0ebed650"

[[package]]
name = "winnow"
version = "0.7.13"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "21a0236b59786fed61e2a80582dd500fe61f18b5dca67a4a067d0bc9039339cf"
dependencies = [
 "memchr",
]

[[package]]
name = "wit-bindgen"
version = "0.46.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f17a85883d4e6d00e8a97c586de764dabcc06133f7f1d55dce5cdc070ad7fe59"

[[package]]
name = "writeable"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9edde0db4769d2dc68579893f2306b26c6ecfbe0ef499b013d731b7b9247e0b9"

[[package]]
name = "yaml-rust2"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8902160c4e6f2fb145dbe9d6760a75e3c9522d8bf796ed7047c85919ac7115f8"
dependencies = [
 "arraydeque",
 "encoding_rs",
 "hashlink",
]

[[package]]
name = "yoke"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "72d6e5c6afb84d73944e5cedb052c4680d5657337201555f9f2a16b7406d4954"
dependencies = [
 "stable_deref_trait",
 "yoke-derive",
 "zerofrom",
]

[[package]]
name = "yoke-derive"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b659052874eb698efe5b9e8cf382204678a0086ebf46982b79d6ca3182927e5d"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
 "synstructure",
]

[[package]]
name = "zerocopy"
version = "0.8.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0894878a5fa3edfd6da3f88c4805f4c8558e2b996227a3d864f47fe11e38282c"
dependencies = [
 "zerocopy-derive",
]

[[package]]
name = "zerocopy-derive"
version = "0.8.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "88d2b8d9c68ad2b9e4340d7832716a4d21a22a1154777ad56ea55c51a9cf3831"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]

[[package]]
name = "zerofrom"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "50cc42e0333e05660c3587f3bf9d0478688e15d870fab3346451ce7f8c9fbea5"
dependencies = [
 "zerofrom-derive",
]

[[package]]
name = "zerofrom-derive"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d71e5d6e06ab090c67b5e44993ec16b72dcbaabc526db883a360057678b48502"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
 "synstructure",
]

[[package]]
name = "zeroize"
version = "1.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b97154e67e32c85465826e8bcc1c59429aaaf107c1e4a9e53c8d8ccd5eff88d0"

[[package]]
name = "zerotrie"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2a59c17a5562d507e4b54960e8569ebee33bee890c70aa3fe7b97e85a9fd7851"
dependencies = [
 "displaydoc",
 "yoke",
 "zerofrom",
]

[[package]]
name = "zerovec"
version = "0.11.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c28719294829477f525be0186d13efa9a3c602f7ec202ca9e353d310fb9a002"
dependencies = [
 "yoke",
 "zerofrom",
 "zerovec-derive",
]

[[package]]
name = "zerovec-derive"
version = "0.11.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eadce39539ca5cb3985590102671f2567e659fca9666581ad3411d59207951f3"
dependencies = [
 "proc-macro2",
 "quote",
 "syn",
]


===== FILE: PLUGIN_SYSTEM.md =====
# Sinter æ’ä»¶ç³»ç»Ÿ

## æ¦‚è¿°

Sinter é‡‡ç”¨æè‡´ç®€åŒ–çš„æ’ä»¶æ¶æ„ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡å®ç°ç®€å•çš„ trait æ¥æ·»åŠ æ–°å‘½ä»¤ï¼Œæ•´ä¸ªè¿‡ç¨‹åªéœ€å‡ è¡Œä»£ç ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚

## æ ¸å¿ƒè®¾è®¡ç†å¿µ

- **å‡½æ•°å¼Builderæ¨¡å¼**ï¼šä½¿ç”¨é“¾å¼è°ƒç”¨æ³¨å†Œæ’ä»¶ï¼Œå¦‚ `Sinter::new().plugin(A).plugin(B).run()`
- **é›¶é…ç½®æ³¨å†Œ**ï¼šæ’ä»¶è‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥æ’ä»¶æ¥å£
- **è¿è¡Œæ—¶çµæ´»**ï¼šæ”¯æŒæ¡ä»¶åŠ è½½å’ŒåŠ¨æ€æ‰©å±•
- **æè‡´ç®€å•**ï¼šæ·»åŠ æ–°å‘½ä»¤åªéœ€å®ç° trait

## æ¶æ„ç»„ä»¶

### CommandHandler Trait

æ‰€æœ‰æ’ä»¶å‘½ä»¤éƒ½å®ç° `CommandHandler` traitï¼š

```rust
#[async_trait]
pub trait CommandHandler: Send + Sync {
    fn name(&self) -> &'static str;
    fn about(&self) -> &'static str;
    fn configure(&self, cmd: Command) -> Command;
    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> anyhow::Result<()>;
}
```

### Sinter Builder

ä½¿ç”¨å‡½æ•°å¼Builderæ¨¡å¼æ„å»ºåº”ç”¨ï¼Œæ”¯æŒé“¾å¼æ’ä»¶æ³¨å†Œï¼š

```rust
pub struct Sinter {
    plugins: Vec<Box<dyn CommandHandler>>,
}

impl Sinter {
    pub fn new() -> Self;
    pub fn plugin<H: CommandHandler + 'static>(self, handler: H) -> Self;
    pub fn plugins<H: CommandHandler + 'static, I: IntoIterator<Item = H>>(self, handlers: I) -> Self;
    pub async fn run(self) -> anyhow::Result<()>;
}
```

## æ·»åŠ æ–°æ’ä»¶çš„æ­¥éª¤

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è¶…çº§ç®€å•çš„å®ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„æ–¹å¼ï¼Œæ— éœ€äº†è§£å†…éƒ¨ç»†èŠ‚ï¼š

```rust
// src/cmd/my_plugin.rs
use crate::simple_plugin;

simple_plugin!(
    "mycommand",           // å‘½ä»¤å
    "My awesome command",  // å‘½ä»¤æè¿°
    |cmd: clap::Command| cmd.arg(  // å‚æ•°é…ç½®
        clap::Arg::new("input")
            .help("Input file")
            .required(true)
    ),
    |matches: clap::ArgMatches, cwd: std::path::PathBuf| async move {  // æ‰§è¡Œé€»è¾‘
        let input = matches.get_one::<String>("input").unwrap();
        println!("Processing: {}", input);
        Ok(())
    }
);
```

ç„¶ååœ¨ `main.rs` ä¸­æ³¨å†Œï¼š

```rust
use sinter::{Sinter, cmd::plugin_mycommand};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    Sinter::new()
        .plugin(plugin_mycommand)
        .run()
        .await
}
```

### æ–¹å¼äºŒï¼šä¼ ç»Ÿæ–¹å¼ï¼ˆäº†è§£å†…éƒ¨ç»†èŠ‚ï¼‰

å¦‚æœä½ éœ€è¦æ›´å¤šæ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ï¼š

```rust
pub struct MyPlugin;

#[async_trait]
impl CommandHandler for MyPlugin {
    fn name(&self) -> &'static str {
        "mycommand"
    }

    fn about(&self) -> &'static str {
        "My awesome command"
    }

    fn configure(&self, cmd: Command) -> Command {
        cmd.arg(
            Arg::new("input")
                .help("Input file")
                .required(true)
        )
    }

    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> anyhow::Result<()> {
        let input = matches.get_one::<String>("input").unwrap();
        println!("Processing: {}", input);
        Ok(())
    }
}
```

## å®Œæ•´ç¤ºä¾‹

### ä½¿ç”¨ç®€å•å®çš„å®Œæ•´ç¤ºä¾‹

```rust
// src/cmd/hello_plugin.rs
use crate::simple_plugin;

simple_plugin!(
    "hello",
    "Say hello to someone",
    |cmd: clap::Command| cmd.arg(
        clap::Arg::new("name")
            .help("Name to greet")
            .required(true)
    ),
    |matches: clap::ArgMatches, _cwd: std::path::PathBuf| async move {
        let name = matches.get_one::<String>("name").unwrap();
        println!("Hello, {}!", name);
        Ok(())
    }
);
```

```rust
// src/cmd/mod.rs
pub mod hello_plugin;
pub use hello_plugin::plugin_hello;
```

```rust
// src/main.rs - å‡½æ•°å¼Builderæ¨¡å¼
use sinter::{Sinter, cmd::plugin_hello};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // é“¾å¼æ³¨å†Œæ’ä»¶ï¼Œæè‡´ç®€æ´
    Sinter::new()
        .plugin(plugin_hello)
        .run()
        .await
}
```

### ä¼ ç»Ÿæ–¹å¼çš„å®Œæ•´ç¤ºä¾‹

```rust
// src/cmd/hello_plugin.rs
use crate::CommandHandler;
use async_trait::async_trait;
use clap::{Arg, ArgMatches, Command};
use std::path::PathBuf;

pub struct HelloPlugin;

#[async_trait]
impl CommandHandler for HelloPlugin {
    fn name(&self) -> &'static str {
        "hello"
    }

    fn about(&self) -> &'static str {
        "Say hello to someone"
    }

    fn configure(&self, cmd: Command) -> Command {
        cmd.arg(
            Arg::new("name")
                .help("Name to greet")
                .required(true)
        )
    }

    async fn execute(&self, matches: &ArgMatches, _cwd: &PathBuf) -> anyhow::Result<()> {
        let name = matches.get_one::<String>("name").unwrap();
        println!("Hello, {}!", name);
        Ok(())
    }
}
```

```rust
// src/cmd/mod.rs
pub mod hello_plugin;
pub use hello_plugin::HelloPlugin;
```

```rust
// src/main.rs - å‡½æ•°å¼Builderæ¨¡å¼
use sinter::{Sinter, cmd::HelloPlugin};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // é“¾å¼æ³¨å†Œæ’ä»¶ï¼Œæè‡´ç®€æ´
    Sinter::new()
        .plugin(HelloPlugin)
        .run()
        .await
}
```

## å‡½æ•°å¼Builderæ¨¡å¼ä½¿ç”¨

### åŸºæœ¬ç”¨æ³•

```rust
use sinter::{Sinter, cmd::*};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    Sinter::new()
        .plugin(JspPlugin)
        .run()
        .await
}
```

### é«˜çº§ç”¨æ³•

```rust
// æ‰¹é‡æ³¨å†Œæ’ä»¶
let plugins = vec![JspPlugin, HelloPlugin, BuildPlugin];
Sinter::new()
    .plugins(plugins)
    .run()
    .await?;

// æ¡ä»¶æ³¨å†Œ
Sinter::new()
    .plugin(BasicPlugin)
    .plugin(AdvancedPlugin)
    .run()
    .await?;
```

### é“¾å¼è°ƒç”¨çš„ç¾å­¦

```rust
// åƒæ­ç§¯æœ¨ä¸€æ ·æ„å»ºåº”ç”¨
Sinter::new()
    .plugin(WebPlugin)      // Webå¼€å‘æ’ä»¶
    .plugin(DatabasePlugin) // æ•°æ®åº“æ’ä»¶
    .plugin(TestPlugin)     // æµ‹è¯•æ’ä»¶
    .plugin(DocsPlugin)     // æ–‡æ¡£æ’ä»¶
    .run()
    .await?;
```

## ä½¿ç”¨æ’ä»¶

```bash
# æ’ä»¶ä¼šè‡ªåŠ¨å‡ºç°åœ¨å¸®åŠ©ä¸­
sinter --help

# ä½¿ç”¨æ’ä»¶å‘½ä»¤
sinter jsp myapp
sinter hello world
# è¾“å‡º: Hello, world!
```

## æ’ä»¶ç”Ÿå‘½å‘¨æœŸ

1. **ç¼–è¯‘æ—¶æ³¨å†Œ**ï¼šæ’ä»¶åœ¨ç¼–è¯‘æ—¶é€šè¿‡ `register_plugin!` å®æ³¨å†Œåˆ°å…¨å±€æ³¨å†Œè¡¨
2. **è¿è¡Œæ—¶åˆå§‹åŒ–**ï¼šåœ¨ `main` å‡½æ•°ä¸­è°ƒç”¨æ’ä»¶åˆå§‹åŒ–å‡½æ•°
3. **å‘½ä»¤æ‰§è¡Œ**ï¼šCLI è§£ææ—¶è‡ªåŠ¨å‘ç°æ’ä»¶å‘½ä»¤ï¼Œæ‰§è¡Œæ—¶è°ƒç”¨å¯¹åº”å¤„ç†å™¨

## è®¾è®¡ä¼˜åŠ¿

### 1. æè‡´ç®€å•
- æ·»åŠ æ–°å‘½ä»¤åªéœ€å®ç° trait
- æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
- è‡ªåŠ¨å‘½ä»¤å‘ç°å’Œæ³¨å†Œ

### 2. ç±»å‹å®‰å…¨
- ç¼–è¯‘æ—¶æ£€æŸ¥æ‰€æœ‰æ¥å£
- é¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯
- æ™ºèƒ½æç¤ºå’Œé‡æ„æ”¯æŒ

### 3. é«˜æ€§èƒ½
- é›¶æˆæœ¬æŠ½è±¡
- é™æ€åˆ†å‘
- æœ€å°è¿è¡Œæ—¶å¼€é”€

### 4. å¯æ‰©å±•æ€§
- æ”¯æŒä»»æ„æ•°é‡çš„æ’ä»¶
- è¿è¡Œæ—¶åŠ¨æ€åŠ è½½
- æ¡ä»¶ç¼–è¯‘æ”¯æŒ

### 5. æ˜“ç»´æŠ¤
- æ’ä»¶å®Œå…¨ç‹¬ç«‹
- ç§»é™¤æ’ä»¶åªéœ€åˆ é™¤æ–‡ä»¶
- æ— æ®‹ç•™ä»£ç 

## æœ€ä½³å®è·µ

### æ’ä»¶å‘½å
- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- é¿å…ä¸å†…ç½®å‘½ä»¤å†²çª
- ä¿æŒç®€æ´æ˜äº†

### é”™è¯¯å¤„ç†
- ä½¿ç”¨ `anyhow::Result` è¿›è¡Œé”™è¯¯å¤„ç†
- æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯
- æ­£ç¡®å¤„ç†å¼‚æ­¥æ“ä½œ

### å‚æ•°è®¾è®¡
- ä½¿ç”¨ clap çš„ç±»å‹å®‰å…¨å‚æ•°
- æä¾›æ¸…æ™°çš„å¸®åŠ©ä¿¡æ¯
- æ”¯æŒå¯é€‰å‚æ•°

### æµ‹è¯•
- ä¸ºæ¯ä¸ªæ’ä»¶ç¼–å†™å•å…ƒæµ‹è¯•
- æµ‹è¯•å‚æ•°è§£æå’Œæ‰§è¡Œé€»è¾‘
- éªŒè¯é”™è¯¯å¤„ç†

## é«˜çº§ç”¨æ³•

### æ¡ä»¶æ’ä»¶
```rust
#[cfg(feature = "advanced")]
pub fn init_advanced_plugin() {
    crate::register_plugin(AdvancedPlugin);
}
```

### æ’ä»¶ç»„
```rust
pub fn init_all_plugins() {
    init_basic_plugin();
    init_advanced_plugin();
    init_experimental_plugin();
}
```

### åŠ¨æ€é…ç½®
```rust
impl CommandHandler for ConfigurablePlugin {
    fn configure(&self, cmd: Command) -> Command {
        // ä»é…ç½®æ–‡ä»¶è¯»å–å‚æ•°å®šä¹‰
        let config = load_config();
        cmd.args(&config.args)
    }
}
```

## è¿ç§»æŒ‡å—

### ä»æ—§æ¶æ„è¿ç§»

æ—§çš„å‘½ä»¤ç³»ç»Ÿéœ€è¦æ‰‹åŠ¨ä¿®æ”¹å¤šä¸ªæ–‡ä»¶ï¼š

```rust
// æ—§æ–¹å¼ - éœ€è¦ä¿®æ”¹4ä¸ªæ–‡ä»¶
// 1. cli.rs - æ·»åŠ æšä¸¾å˜ä½“å’Œè§£æ
// 2. lib.rs - æ·»åŠ matchåˆ†æ”¯
// 3. cmd/mod.rs - æ·»åŠ æ¨¡å—
// 4. main.rs - å¯èƒ½éœ€è¦æ³¨å†Œ
```

æ–°çš„æ’ä»¶ç³»ç»Ÿåªéœ€ï¼š

```rust
// æ–°æ–¹å¼ - åªéœ€ä¸€ä¸ªæ–‡ä»¶
pub struct MyCommand;
impl CommandHandler for MyCommand { /* ... */ }
crate::register_plugin(MyCommand);
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ’ä»¶æœªæ˜¾ç¤ºåœ¨å¸®åŠ©ä¸­**
   - æ£€æŸ¥æ˜¯å¦è°ƒç”¨äº†åˆå§‹åŒ–å‡½æ•°
   - éªŒè¯æ’ä»¶åç§°ä¸ä¸å†…ç½®å‘½ä»¤å†²çª

2. **ç¼–è¯‘é”™è¯¯**
   - ç¡®ä¿å®ç°äº†æ‰€æœ‰ trait æ–¹æ³•
   - æ£€æŸ¥å¼‚æ­¥å‡½æ•°ç­¾å

3. **è¿è¡Œæ—¶é”™è¯¯**
   - éªŒè¯å‚æ•°è§£æé€»è¾‘
   - æ£€æŸ¥æ–‡ä»¶è·¯å¾„å¤„ç†

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ `cargo build --verbose` æŸ¥çœ‹ç¼–è¯‘è¯¦æƒ…
- æ·»åŠ æ—¥å¿—è¾“å‡ºè°ƒè¯•æ’ä»¶æ‰§è¡Œ
- ä½¿ç”¨ `println!` éªŒè¯åˆå§‹åŒ–é¡ºåº

## æœªæ¥æ‰©å±•

- **æ’ä»¶å¸‚åœº**ï¼šæ”¯æŒä»è¿œç¨‹ä»“åº“åŠ è½½æ’ä»¶
- **çƒ­é‡è½½**ï¼šè¿è¡Œæ—¶é‡æ–°åŠ è½½æ’ä»¶
- **ä¾èµ–ç®¡ç†**ï¼šæ’ä»¶é—´çš„ä¾èµ–å…³ç³»
- **é…ç½®ç•Œé¢**ï¼šå›¾å½¢åŒ–æ’ä»¶é…ç½®

---

è¿™ä¸ªæ’ä»¶ç³»ç»Ÿå°†å¤æ‚æ€§é™åˆ°æœ€ä½ï¼ŒåŒæ—¶ä¿æŒäº†æœ€å¤§çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸å¿…å…³å¿ƒæ¡†æ¶ç»†èŠ‚ã€‚

===== FILE: ARCHITECTURE.md =====
# Sinter æ¶æ„æ–‡æ¡£

## é¡¹ç›®ç»“æ„

```
sinter/
â”œâ”€â”€ Cargo.toml              # Workspace é…ç½®
â”œâ”€â”€ src/                     # ä¸»é¡¹ç›®åº“ä»£ç 
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ handler.rs      # CommandHandler trait
â”‚   â”‚   â”œâ”€â”€ app.rs          # Sinter åº”ç”¨æ„å»ºå™¨
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ runtime/            # è¿è¡Œæ—¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ executor.rs     # å‘½ä»¤æ‰§è¡Œå™¨
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ cli.rs              # CLI å®šä¹‰å’Œè§£æ
â”‚   â”œâ”€â”€ config.rs           # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ build/              # æ„å»ºç›¸å…³
â”‚   â”œâ”€â”€ deps/               # ä¾èµ–ç®¡ç†
â”‚   â”œâ”€â”€ cmd/                # å†…ç½®å‘½ä»¤å®ç°
â”‚   â”‚   â”œâ”€â”€ builtin.rs      # å†…ç½®å‘½ä»¤æ‰§è¡Œé€»è¾‘
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ lib.rs              # å…¬å…± API
â”œâ”€â”€ cli/                    # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆç‹¬ç«‹ crateï¼‰
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ main.rs         # ä¸»å…¥å£ï¼Œæ³¨å†Œæ’ä»¶
â”œâ”€â”€ sinter-plugin/          # æ’ä»¶å¼€å‘ APIï¼ˆç‹¬ç«‹ crateï¼‰
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ src/lib.rs          # æ’ä»¶å¼€å‘ API
â””â”€â”€ plugins/                # æ’ä»¶é›†åˆï¼ˆç‹¬ç«‹ crateï¼‰
    â”œâ”€â”€ Cargo.toml
    â”œâ”€â”€ README.md
    â””â”€â”€ src/
        â”œâ”€â”€ lib.rs          # å¯¼å‡ºæ‰€æœ‰æ’ä»¶
        â””â”€â”€ jsp.rs          # JSP æ’ä»¶ç¤ºä¾‹
```

## æ¨¡å—è¯´æ˜

### æ ¸å¿ƒæ¨¡å— (core)

æ ¸å¿ƒæ¨¡å—åŒ…å«æ’ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæŠ½è±¡ï¼š

- **CommandHandler trait**: æ‰€æœ‰å‘½ä»¤ï¼ˆå†…ç½®å’Œæ’ä»¶ï¼‰éƒ½éœ€è¦å®ç°çš„ trait
- **Sinter ç»“æ„ä½“**: åº”ç”¨æ„å»ºå™¨ï¼Œä½¿ç”¨ Builder æ¨¡å¼

### è¿è¡Œæ—¶æ¨¡å— (runtime)

è¿è¡Œæ—¶æ¨¡å—å¤„ç†å‘½ä»¤çš„æ‰§è¡Œï¼š

- **Executor**: è´Ÿè´£å°†è§£æåçš„å‘½ä»¤åˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†å™¨

### æ’ä»¶ç³»ç»Ÿ

æ’ä»¶ç³»ç»Ÿé‡‡ç”¨ç‹¬ç«‹ crate è®¾è®¡ï¼š

- **plugins**: ç‹¬ç«‹çš„æ’ä»¶ crateï¼ŒåŒ…å«æ‰€æœ‰æ‰©å±•æ’ä»¶
- **cli**: ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ crateï¼Œè´Ÿè´£æ³¨å†Œå’Œè¿è¡Œæ’ä»¶
- **sinter-plugin**: æ’ä»¶å¼€å‘ API crateï¼Œæä¾›æ’ä»¶å¼€å‘æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–å’Œç±»å‹

è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿ï¼š
1. **é¿å…å¾ªç¯ä¾èµ–**ï¼šä¸»é¡¹ç›®åº“ä¸ä¾èµ–æ’ä»¶ï¼Œæ’ä»¶ä¾èµ–ä¸»é¡¹ç›®
2. **æ¸…æ™°çš„åˆ†ç¦»**ï¼šæ ¸å¿ƒåŠŸèƒ½å’Œæ‰©å±•åŠŸèƒ½å®Œå…¨åˆ†ç¦»
3. **æ˜“äºç»´æŠ¤**ï¼šæ’ä»¶å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œå‘å¸ƒ
4. **çµæ´»é…ç½®**ï¼šå¯ä»¥é€‰æ‹©æ€§åœ°åŒ…å«æ’ä»¶

## ä¾èµ–å…³ç³»

```
sinter (lib)
  â””â”€ ä¸ä¾èµ–ä»»ä½•æ’ä»¶

sinter-plugin
  â””â”€ ä¾èµ– sinter (lib)

plugins
  â””â”€ ä¾èµ– sinter-plugin

cli
  â”œâ”€ ä¾èµ– sinter (lib)
  â””â”€ ä¾èµ– plugins
```

## è®¾è®¡åŸåˆ™

1. **æ¸…æ™°çš„æ¨¡å—åˆ†å±‚**ï¼š
   - core: æ ¸å¿ƒæŠ½è±¡
   - runtime: è¿è¡Œæ—¶é€»è¾‘
   - cmd: å…·ä½“å‘½ä»¤å®ç°

2. **ç»Ÿä¸€çš„å‘½ä»¤æ¥å£**ï¼š
   - æ‰€æœ‰å‘½ä»¤ï¼ˆå†…ç½®å’Œæ’ä»¶ï¼‰éƒ½å®ç° `CommandHandler` trait
   - ç»Ÿä¸€çš„æ‰§è¡Œæµç¨‹

3. **æ˜“äºæ‰©å±•**ï¼š
   - æ·»åŠ æ–°æ’ä»¶åªéœ€åœ¨ `plugins` ä¸­å®ç° `CommandHandler` trait
   - æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 

4. **é¿å…å¾ªç¯ä¾èµ–**ï¼š
   - ä¸»é¡¹ç›®åº“ä¸ä¾èµ–æ’ä»¶
   - æ’ä»¶ä¾èµ–ä¸»é¡¹ç›®
   - å¯æ‰§è¡Œæ–‡ä»¶åŒæ—¶ä¾èµ–ä¸»é¡¹ç›®å’Œæ’ä»¶

## ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ’ä»¶

åœ¨ `plugins/src/` ä¸­åˆ›å»ºæ–°æ’ä»¶ï¼š

```rust
use sinter::CommandHandler;
use async_trait::async_trait;
use clap::{Arg, ArgMatches, Command};
use std::path::PathBuf;

pub struct MyPlugin;

#[async_trait]
impl CommandHandler for MyPlugin {
    fn name(&self) -> &'static str {
        "mycommand"
    }

    fn about(&self) -> &'static str {
        "My awesome command"
    }

    fn configure(&self, cmd: Command) -> Command {
        cmd.arg(Arg::new("input").required(true))
    }

    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> anyhow::Result<()> {
        let input = matches.get_one::<String>("input").unwrap();
        println!("Processing: {}", input);
        Ok(())
    }
}

pub fn my_plugin() -> MyPlugin {
    MyPlugin
}
```

### æ³¨å†Œæ’ä»¶

åœ¨ `cli/src/main.rs` ä¸­ï¼š

```rust
use sinter::Sinter;
use plugins::{jsp_plugin, my_plugin};

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    Sinter::new()
        .plugin(jsp_plugin())
        .plugin(my_plugin())
        .run()
        .await
}
```

## æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºæ‰€æœ‰ crate
cargo build

# æ„å»ºç‰¹å®š crate
cargo build --package sinter
cargo build --package sinter-plugin
cargo build --package plugins
cargo build --package cli

# è¿è¡Œ
cargo run --package cli
```


===== FILE: Cargo.toml =====
[workspace]
members = [
  "crates/sinter",
  "crates/sinter-plugin-api",
  "crates/sinter-cli",
  "crates/plugins",
]
resolver = "2"

# â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†
# æ–°å¢è¿™å‡ è¡Œï¼ˆä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰ç»§æ‰¿é—®é¢˜ï¼‰
[workspace.package]
version = "0.1.0"
edition = "2021"
license = "MIT"
# å¯é€‰ï¼šä»¥åæƒ³ç»Ÿä¸€æ”¹ç‰ˆæœ¬å·ã€licenseã€authorsã€repository ç­‰ä¹Ÿæ”¾è¿™é‡Œ
# authors = ["Your Name <you@example.com>"]
# repository = "https://github.com/yourusername/sinter"
# â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†â†

[workspace.dependencies]
anyhow = "1"
async-trait = "0.1"
clap = { version = "4", features = ["derive"] }
tokio = { version = "1", features = ["full"] }
reqwest = { version = "0.12", features = ["json"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"          
toml_edit = "0.22"
config = "0.14"
dirs = "5"
inventory = "0.3"
lazy_static = "1.4"
paste = "1.0"

===== FILE: crates/sinter/Cargo.toml =====
# crates/sinter/Cargo.toml
[package]
name = "sinter"
version.workspace = true
edition.workspace = true
license.workspace = true

[dependencies]
anyhow      = { workspace = true }
async-trait = { workspace = true }
clap        = { workspace = true }
tokio       = { workspace = true }
reqwest     = { workspace = true }
serde       = { workspace = true }
toml_edit   = { workspace = true }
config      = { workspace = true }
dirs        = { workspace = true }
paste       = { workspace = true }
lazy_static = { workspace = true }
inventory   = { workspace = true }
serde_json  = { workspace = true }

===== FILE: crates/sinter/src/cli.rs =====
// src/cli.rs
use clap::{Arg, Command};
use std::path::PathBuf;

pub struct Cli {
    pub command: Option<Commands>,
    pub raw_matches: clap::ArgMatches,
}

pub enum Commands {
    New {
        name: String
    },
    Init,
    Build,
    Run {
        file: Option<PathBuf>,
        lib: bool,
    },
    Add {
        dep: String,
    },
    Test {
        file: Option<PathBuf>,
    },
    Workspace {
        subcommand: WorkspaceCommands,
    },
    Jsp {
        name: String,
    },
}

pub enum WorkspaceCommands {
    Add {
        path: String,
    },
}

impl Cli {

    pub fn parse() -> Self {
        Self::parse_with_plugins(&[])
    }

    pub fn parse_with_plugins(plugins: &[Box<dyn crate::core::CommandHandler>]) -> Self {
        let mut cmd = Command::new("sinter")
            .about(crate::i18n::t("main_about"))
            .subcommand(
                Command::new("new")
                    .about(crate::i18n::t("new_about"))
                    .arg(
                        Arg::new("name")
                            .help(crate::i18n::t("new_name_help"))
                            .required(true)
                    )
            )
            .subcommand(
                Command::new("init")
                    .about(crate::i18n::t("init_about"))
            )
            .subcommand(
                Command::new("build")
                    .about(crate::i18n::t("build_about"))
            )
            .subcommand(
                Command::new("run")
                    .about(crate::i18n::t("run_about"))
                    .arg(
                        Arg::new("file")
                            .help(crate::i18n::t("run_file_help"))
                            .value_name("FILE")
                    )
                    .arg(
                        Arg::new("lib")
                            .long("lib")
                            .help(crate::i18n::t("run_lib_help"))
                            .action(clap::ArgAction::SetTrue)
                    )
            )
            .subcommand(
                Command::new("add")
                    .about(crate::i18n::t("add_about"))
                    .arg(
                        Arg::new("dep")
                            .help(crate::i18n::t("add_dep_help"))
                            .value_name("DEP")
                            .required(true)
                    )
            )
            .subcommand(
                Command::new("test")
                    .about(crate::i18n::t("test_about"))
                    .arg(
                        Arg::new("file")
                            .help(crate::i18n::t("test_file_help"))
                            .value_name("FILE")
                    )
            )
            .subcommand(
                Command::new("workspace")
                    .about(crate::i18n::t("workspace_about"))
                    .subcommand(
                        Command::new("add")
                            .about(crate::i18n::t("workspace_add_about"))
                            .arg(
                                Arg::new("path")
                                    .help(crate::i18n::t("workspace_add_path_help"))
                                    .required(true)
                            )
                    )
            );

        // è‡ªåŠ¨æ·»åŠ æ‰€æœ‰æ’ä»¶å‘½ä»¤
        for handler in plugins {
            cmd = cmd.subcommand(handler.configure(Command::new(handler.name())));
        }

        let matches = cmd.get_matches();

        let command = if let Some(sub_m) = matches.subcommand_matches("new") {
            Some(Commands::New {
                name: sub_m.get_one::<String>("name").unwrap().clone(),
            })
        } else if matches.subcommand_matches("init").is_some() {
            Some(Commands::Init)
        } else if matches.subcommand_matches("build").is_some() {
            Some(Commands::Build)
        } else if let Some(sub_m) = matches.subcommand_matches("run") {
            Some(Commands::Run {
                file: sub_m.get_one::<String>("file").map(|s| PathBuf::from(s)),
                lib: sub_m.get_flag("lib"),
            })
        } else if let Some(sub_m) = matches.subcommand_matches("add") {
            Some(Commands::Add {
                dep: sub_m.get_one::<String>("dep").unwrap().clone(),
            })
        } else if let Some(sub_m) = matches.subcommand_matches("test") {
            Some(Commands::Test {
                file: sub_m.get_one::<String>("file").map(|s| PathBuf::from(s)),
            })
        } else if let Some(ws_m) = matches.subcommand_matches("workspace") {
            if let Some(sub_m) = ws_m.subcommand_matches("add") {
                Some(Commands::Workspace {
                    subcommand: WorkspaceCommands::Add {
                        path: sub_m.get_one::<String>("path").unwrap().clone(),
                    }
                })
            } else {
                None
            }
        } else if let Some(sub_m) = matches.subcommand_matches("jsp") {
            Some(Commands::Jsp {
                name: sub_m.get_one::<String>("name").unwrap().clone(),
            })
        } else {
            None
        };

        Cli { command, raw_matches: matches }
    }
}

===== FILE: crates/sinter/src/config.rs =====
use serde::{Deserialize, Serialize};
use std::collections::HashMap;
use std::path::Path;

use anyhow::Context;
use config::Config;
use toml_edit::{value, DocumentMut, Item, Table};

use crate::deps::deps::Dependency;

#[derive(Deserialize, Serialize, Debug)]
pub struct Project {
    pub package: Package,
    #[serde(default)]
    pub dependencies: HashMap<String, DependencySpec>,
    #[serde(default)]
    pub workspace: Option<Workspace>,
}

#[derive(Deserialize, Serialize, Debug)]
#[serde(untagged)]
pub enum DependencySpec {
    Simple(String),
    Detailed(DependencyDetail),
}

#[derive(Deserialize, Serialize, Debug)]
pub struct DependencyDetail {
    pub version: Option<String>,
    #[serde(default)]
    pub workspace: bool,
}

#[derive(Deserialize, Serialize, Debug)]
pub struct Workspace {
    pub members: Vec<String>,
    #[serde(default)]
    pub dependencies: HashMap<String, DependencySpec>,
}

#[derive(Deserialize, Serialize, Debug)]
pub struct Package {
    pub name: String,
    pub version: String,
    pub main: Option<String>,
    #[serde(default = "default_scala_version")]
    pub scala_version: String,
    #[serde(default = "default_source_dir")]
    pub source_dir: String,
    #[serde(default = "default_target_dir")]
    pub target_dir: String,
    #[serde(default = "default_test_dir")]
    pub test_dir: String,
    #[serde(default = "default_backend")]
    pub backend: String,
}

fn default_scala_version() -> String {
    "2.13".to_string()
}

fn default_source_dir() -> String {
    "src/main/scala".to_string()
}

fn default_target_dir() -> String {
    "target".to_string()
}

fn default_test_dir() -> String {
    "src/test/scala".to_string()
}

fn default_backend() -> String {
    "scala-cli".to_string()
}

pub fn load_project(dir: &Path) -> anyhow::Result<Project> {
    let manifest_path = dir.join("Sinter.toml");
    let settings = Config::builder()
        .add_source(config::File::from(manifest_path))
        .build()?;
    let proj: Project = settings.try_deserialize()?;
    Ok(proj)
}

pub fn load_project_async(dir: &Path) -> anyhow::Result<Project> {
    // For async operations if needed
    load_project(dir)
}

pub fn get_dependencies(project: &Project) -> Vec<Dependency> {
    project.dependencies
        .iter()
        .filter_map(|(k, spec)| match spec {
            crate::config::DependencySpec::Simple(version) => {
                Some(Dependency::from_toml_key(k, &version))
            }
            crate::config::DependencySpec::Detailed(detail) => {
                detail.version.as_ref().map(|v| Dependency::from_toml_key(k, v))
            }
        })
        .collect()
}

pub fn get_dependencies_with_workspace(project: &Project, workspace_root: Option<&Project>) -> Vec<Dependency> {
    let mut deps = Vec::new();

    // å…ˆæ·»åŠ workspaceä¾èµ–
    if let Some(ws) = workspace_root {
        if let Some(ws_config) = &ws.workspace {
            for (k, spec) in &ws_config.dependencies {
                match spec {
                    crate::config::DependencySpec::Simple(version) => {
                        deps.push(Dependency::from_toml_key(k, &version));
                    }
                    crate::config::DependencySpec::Detailed(detail) => {
                        if let Some(version) = &detail.version {
                            deps.push(Dependency::from_toml_key(k, version));
                        }
                    }
                }
            }
        }
    }

    // ç„¶åæ·»åŠ é¡¹ç›®ç‰¹å®šä¾èµ–
    for (k, spec) in &project.dependencies {
        match spec {
            crate::config::DependencySpec::Simple(version) => {
                deps.push(Dependency::from_toml_key(k, &version));
            }
            crate::config::DependencySpec::Detailed(detail) => {
                if detail.workspace {
                    // workspaceä¾èµ–ï¼Œä»workspaceæ ¹è·å–ç‰ˆæœ¬
                    if let Some(ws) = workspace_root {
                        if let Some(ws_config) = &ws.workspace {
                            if let Some(ws_spec) = ws_config.dependencies.get(k) {
                                match ws_spec {
                                    crate::config::DependencySpec::Simple(version) => {
                                        deps.push(Dependency::from_toml_key(k, &version));
                                    }
                                    crate::config::DependencySpec::Detailed(ws_detail) => {
                                        if let Some(version) = &ws_detail.version {
                                            deps.push(Dependency::from_toml_key(k, version));
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else if let Some(version) = &detail.version {
                    deps.push(Dependency::from_toml_key(k, version));
                }
            }
        }
    }

    deps
}

pub fn get_main_file_path(project: &Project) -> std::path::PathBuf {
    let main_class = project.package.main.as_deref().unwrap_or("Main");
    std::path::PathBuf::from(&project.package.source_dir).join(format!("{}.scala", main_class))
}

pub fn find_workspace_root(start_dir: &Path) -> Option<std::path::PathBuf> {
    let mut current = start_dir;
    loop {
        let manifest = current.join("Sinter.toml");
        if manifest.exists() {
            if let Ok(settings) = Config::builder()
                .add_source(config::File::from(manifest.clone()))
                .build()
            {
                if let Ok(project) = settings.try_deserialize::<Project>() {
                    if project.workspace.is_some() {
                        return Some(current.to_path_buf());
                    }
                }
            }
        }
        if let Some(parent) = current.parent() {
            current = parent;
        } else {
            break;
        }
    }
    None
}

pub fn load_workspace(dir: &Path) -> anyhow::Result<Option<(Project, Vec<Project>)>> {
    let manifest_path = dir.join("Sinter.toml");
    if !manifest_path.exists() {
        return Ok(None);
    }
    let settings = Config::builder()
        .add_source(config::File::from(manifest_path))
        .build()?;
    let root_project: Project = settings.try_deserialize()?;
    if let Some(workspace) = &root_project.workspace {
        let mut members = Vec::new();
        for member_path in &workspace.members {
            let member_dir = dir.join(member_path);
            let member_project = load_project(&member_dir)?;
            members.push(member_project);
        }
        Ok(Some((root_project, members)))
    } else {
        Ok(None)
    }
}


pub fn add_dependency_to_manifest(manifest_path: &Path, key: &str, version: &str) -> anyhow::Result<()> {
    let content = std::fs::read_to_string(manifest_path)?;

    // æ­¥éª¤ 1ï¼šè§£æä¸º Document<String>
    let mut doc: DocumentMut = content
        .parse()
        .context("Failed to parse Sinter.toml as TOML document")?;

    // ç¡®ä¿ dependencies è¡¨å­˜åœ¨
    let deps_key = "dependencies";
    if !doc.contains_key(deps_key) {
        doc.insert(deps_key, Item::Table(Table::new()));
    }

    let deps_item = doc.get_mut(deps_key).unwrap();
    if let Some(deps_table) = deps_item.as_table_mut() {
        deps_table[key] = value(version.to_string());

        // ç¾åŒ–æ ¼å¼
        let decor = deps_table.decor_mut();
        decor.set_prefix("\n");
        decor.set_suffix("\n");
    }

    std::fs::write(manifest_path, doc.to_string())?;
    Ok(())
}

pub fn add_workspace_member(manifest_path: &Path, member_path: &str) -> anyhow::Result<()> {
    let content = std::fs::read_to_string(manifest_path)?;
    let mut doc: DocumentMut = content.parse().context("Failed to parse Sinter.toml")?;

    // Ensure workspace table exists
    let ws_key = "workspace";
    if !doc.contains_key(ws_key) {
        doc.insert(ws_key, Item::Table(Table::new()));
    }

    let ws_item = doc.get_mut(ws_key).unwrap();
    if let Some(ws_table) = ws_item.as_table_mut() {
        // Ensure members array exists
        if !ws_table.contains_key("members") {
            ws_table.insert("members", Item::Value(toml_edit::Value::Array(Default::default())));
        }

        if let Some(members_item) = ws_table.get_mut("members") {
            if let Some(members_array) = members_item.as_array_mut() {
                // Check if member already exists
                let exists = members_array.iter().any(|v| v.as_str() == Some(member_path));
                if !exists {
                    members_array.push(member_path);
                    std::fs::write(manifest_path, doc.to_string())?;
                }
            }
        }
    }

    Ok(())
}

===== FILE: crates/sinter/src/i18n.rs =====
use std::collections::HashMap;
use std::env;

#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]
pub enum Language {
    En,
    Zh,
}

impl Language {
    pub fn from_env() -> Self {
        match env::var("SCARGO_LANG").as_deref() {
            Ok("zh") | Ok("zh-CN") | Ok("zh-TW") => Language::Zh,
            _ => Language::En,
        }
    }
}

pub struct I18n {
    messages: HashMap<&'static str, HashMap<Language, &'static str>>,
}

impl I18n {
    fn load_translations() -> HashMap<&'static str, HashMap<Language, &'static str>> {
        let mut messages: HashMap<&'static str, HashMap<Language, &'static str>> = HashMap::new();

        // Mapping from description to key
        let description_to_key = [
            ("åº”ç”¨ä¸»æè¿°", "main_about"),
            ("Application main description", "main_about"),
            ("new (name=é¡¹ç›®åç§°)", "new_about"),
            ("New command description", "new_about"),
            ("init", "init_about"),
            ("Init command description", "init_about"),
            ("build", "build_about"),
            ("Build command description", "build_about"),
            ("run (file=æ–‡ä»¶, lib=åº“æ ‡å¿—)", "run_about"),
            ("Run command description", "run_about"),
            ("add (dep=ä¾èµ–)", "add_about"),
            ("Add command description", "add_about"),
            ("workspace", "workspace_about"),
            ("Workspace command description", "workspace_about"),
            ("workspace add (path=è·¯å¾„)", "workspace_add_about"),
            ("Workspace add subcommand description", "workspace_add_about"),
            ("new name", "new_name_help"),
            ("New command name parameter help", "new_name_help"),
            ("run file", "run_file_help"),
            ("Run command file parameter help", "run_file_help"),
            ("run lib", "run_lib_help"),
            ("Run command lib flag help", "run_lib_help"),
            ("add dep", "add_dep_help"),
            ("Add command dependency parameter help", "add_dep_help"),
            ("workspace add path", "workspace_add_path_help"),
            ("Workspace add path parameter help", "workspace_add_path_help"),
            ("test (file=æ–‡ä»¶)", "test_about"),
            ("Test command description", "test_about"),
            ("test file", "test_file_help"),
            ("Test command file parameter help", "test_file_help"),
            ("é¡¹ç›®å·²å­˜åœ¨é”™è¯¯", "project_already_exists"),
            ("Project already exists error", "project_already_exists"),
            ("åˆ›å»ºæ–°é¡¹ç›®æ¶ˆæ¯", "created_project"),
            ("Created project message", "created_project"),
            ("Initialized empty workspace message", "initialized_empty_workspace"),
            ("Added workspace member message", "added_member_to_workspace"),
            ("Member already exists error", "member_already_exists"),
            ("Added dependency message", "added_dependency"),
            ("Built member message", "built_member"),
            ("Build succeeded with dependencies message", "build_succeeded_with_deps"),
            ("Library compile mode message", "lib_compiled_only"),
            ("Main file not found error", "main_file_not_found"),
            ("No command provided error", "no_command_provided"),
            ("Config file already exists error", "config_file_already_exists"),
            ("Not in workspace error", "not_in_workspace"),
        ];

        let description_map: HashMap<&str, &str> = description_to_key.iter().cloned().collect();

        // Load English translations
        let en_content = include_str!("templates/i18n.en.template");
        for line in en_content.lines() {
            let line = line.trim();
            // Skip empty lines
            if line.is_empty() {
                continue;
            }
            if let Some((description, value)) = line.split_once(':') {
                let description = description.trim();
                let value = value.trim();
                if let Some(&key) = description_map.get(description) {
                    let key_static = Box::leak(key.to_string().into_boxed_str());
                    let value_static = Box::leak(value.to_string().into_boxed_str());
                    messages.entry(key_static).or_insert_with(HashMap::new).insert(Language::En, value_static);
                }
            }
        }

        // Load Chinese translations
        let zh_content = include_str!("templates/i18n.zh.template");
        for line in zh_content.lines() {
            let line = line.trim();
            // Skip empty lines
            if line.is_empty() {
                continue;
            }
            // Try Chinese colon first, then English colon
            let (description, value) = if let Some((d, v)) = line.split_once('ï¼š') {
                (d.trim(), v.trim())
            } else if let Some((d, v)) = line.split_once(':') {
                (d.trim(), v.trim())
            } else {
                continue;
            };
            if let Some(&key) = description_map.get(description) {
                let key_static = Box::leak(key.to_string().into_boxed_str());
                let value_static = Box::leak(value.to_string().into_boxed_str());
                messages.entry(key_static).or_insert_with(HashMap::new).insert(Language::Zh, value_static);
            }
        }

        messages
    }

    pub fn new() -> Self {
        let messages = Self::load_translations();
        Self { messages }
    }

    pub fn get(&self, key: &str) -> String {
        let lang = Language::from_env();
        self.messages
            .get(key)
            .and_then(|lang_map| lang_map.get(&lang))
            .map(|s| s.to_string())
            .unwrap_or_else(|| key.to_string()) // å¦‚æœæ‰¾ä¸åˆ°ç¿»è¯‘ï¼Œè¿”å›keyæœ¬èº«
    }

    pub fn format(&self, key: &str, args: &[&str]) -> String {
        let template = self.get(key);
        let mut result = template.clone();
        for (i, arg) in args.iter().enumerate() {
            let placeholder = format!("{{{}}}", i);
            result = result.replace(&placeholder, arg);
        }
        result
    }
}

lazy_static::lazy_static! {
    pub static ref I18N: I18n = I18n::new();
}

pub fn t(key: &str) -> String {
    I18N.get(key)
}

pub fn tf(key: &str, args: &[&str]) -> String {
    I18N.format(key, args)
}

===== FILE: crates/sinter/src/lib.rs =====
//! Sinter - Scala é¡¹ç›®æ„å»ºå·¥å…·
//!
//! è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼ Cargo çš„ Scala é¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·ã€‚

// æ ¸å¿ƒæ¨¡å—
pub mod core;

// è¿è¡Œæ—¶æ¨¡å—
pub mod runtime;

// CLI å’Œé…ç½®
pub mod cli;
pub mod config;

// åŠŸèƒ½æ¨¡å—
pub mod build;
pub mod deps;
pub mod cmd;

// å®å’Œå·¥å…·
#[macro_use]
pub mod commands;
#[macro_use]
pub mod i18n;

extern crate paste;

// å…¬å…± API
pub use core::{CommandHandler, Sinter};
pub use cli::{Cli, Commands};

===== FILE: crates/sinter/src/commands.rs =====
/// æè‡´ç®€åŒ–çš„å‘½ä»¤å®šä¹‰å®
#[macro_export]
macro_rules! plugin_command {
    ($name:ident, $about:expr, $body:block) => {
        pub struct $name;

        #[async_trait::async_trait]
        impl crate::core::CommandHandler for $name {
            fn name(&self) -> &'static str {
                stringify!($name).to_lowercase().trim_end_matches("command")
            }

            fn about(&self) -> &'static str {
                $about
            }

            async fn execute(&self, matches: &clap::ArgMatches, cwd: &std::path::PathBuf) -> anyhow::Result<()> {
                $body
            }
        }

            inventory::submit! {
            Box::new($name) as Box<dyn crate::core::CommandHandler>
        }
    };
}

/// è¶…çº§ç®€å•çš„æ’ä»¶å®šä¹‰å® - æ— éœ€äº†è§£å†…éƒ¨ç»†èŠ‚
#[macro_export]
macro_rules! simple_plugin {
    ($cmd_name:literal, $description:literal, $config:expr, $handler:expr) => {
        paste::paste! {
            pub struct [<Simple $cmd_name:camel Plugin>];

            #[async_trait::async_trait]
            impl crate::core::CommandHandler for [<Simple $cmd_name:camel Plugin>] {
                fn name(&self) -> &'static str {
                    $cmd_name
                }

                fn about(&self) -> &'static str {
                    $description
                }

                fn configure(&self, cmd: clap::Command) -> clap::Command {
                    let config_fn = $config;
                    config_fn(cmd.about(self.about()))
                }

                async fn execute(&self, matches: &clap::ArgMatches, cwd: &std::path::PathBuf) -> anyhow::Result<()> {
                    let handler = $handler;
                    handler(matches.clone(), cwd.clone()).await
                }
            }

            // å¯¼å‡ºæ’ä»¶ç»“æ„ä½“ä¾›æ³¨å†Œä½¿ç”¨
            pub use [<Simple $cmd_name:camel Plugin>] as [<plugin_ $cmd_name>];
        }
    };
}

===== FILE: crates/sinter/src/cmd/init.rs =====
use std::path::PathBuf;

pub async fn cmd_init(cwd: &PathBuf) -> anyhow::Result<()> {
    // Check if Sinter.toml already exists
    let manifest_path = cwd.join("Sinter.toml");
    if manifest_path.exists() {
        anyhow::bail!("{}", crate::i18n::t("scargo_toml_already_exists"));
    }

    // Create workspace Sinter.toml
    let manifest = include_str!("../templates/workspace.sinter.toml.template");
    tokio::fs::write(manifest_path, manifest).await?;

    println!("{}", crate::i18n::tf("initialized_empty_workspace", &[&cwd.display().to_string()]));
    Ok(())
}

===== FILE: crates/sinter/src/cmd/mod.rs =====
pub mod new;
pub mod init;
pub mod test;
pub mod workspace;
pub mod builtin;

// å¯¼å‡ºå‘½ä»¤å‡½æ•°
pub use init::cmd_init;
pub use test::cmd_test;
pub use workspace::cmd_workspace;
pub use new::cmd_new;

===== FILE: crates/sinter/src/cmd/new.rs =====
use std::path::PathBuf;


pub async fn cmd_new(cwd: &PathBuf, name: &str) -> anyhow::Result<()> {
    let proj_dir = cwd.join(name);
    if proj_dir.exists() {
        println!("{}", crate::i18n::tf("project_already_exists", &[name]));
        return Ok(());
    }
    tokio::fs::create_dir_all(proj_dir.join("src/main/scala")).await?;

    // Sinter.toml
    let template = include_str!("../templates/sinter.toml.template");
    let manifest = template.replace("{name}", name);
    tokio::fs::write(proj_dir.join("Sinter.toml"), manifest).await?;

    // Hello world
    let code = include_str!("../templates/main.scala.template");
    tokio::fs::write(
        proj_dir.join("src/main/scala/Main.scala"),
        code,
    )
    .await?;

    println!("{}", crate::i18n::tf("created_project", &[name]));
    Ok(())
}


===== FILE: crates/sinter/src/cmd/test.rs =====
use std::path::PathBuf;
use tokio::process::Command;

pub async fn cmd_test(cwd: &PathBuf, file: Option<PathBuf>) -> anyhow::Result<()> {
    let workspace_root = crate::config::find_workspace_root(cwd);
    let (project, project_dir) = if let Some(ws_root) = workspace_root.as_ref() {
        // In workspace, check if this is a member project
        if let Some((_ws_proj, members)) = crate::config::load_workspace(ws_root)? {
            let relative_path = cwd.strip_prefix(ws_root).unwrap();
            if let Some(first_component) = relative_path.components().next() {
                let member_name = first_component.as_os_str().to_str().unwrap();
                if let Some(member) = members.into_iter().find(|m| m.package.name == member_name) {
                    (member, ws_root.clone().join(member_name))
                } else {
                    // Not a workspace member, treat as standalone project
                    let proj = crate::config::load_project(cwd)?;
                    (proj, cwd.clone())
                }
            } else {
                // cwd == ws_root, treat as standalone project
                let proj = crate::config::load_project(cwd)?;
                (proj, cwd.clone())
            }
        } else {
            // No workspace config, treat as standalone project
            let proj = crate::config::load_project(cwd)?;
            (proj, cwd.clone())
        }
    } else {
        let proj = crate::config::load_project(cwd)?;
        (proj, cwd.clone())
    };

    let deps = if let Some(ws_root) = workspace_root {
        let ws_proj = crate::config::load_project(&ws_root)?;
        crate::config::get_dependencies_with_workspace(&project, Some(&ws_proj))
    } else {
        crate::config::get_dependencies(&project)
    };

    let test_target = if let Some(f) = file {
        f
    } else {
        PathBuf::from(&project.package.test_dir)
    };

    let abs_test_target = project_dir.join(&test_target);

    if !abs_test_target.exists() {
        println!("No tests found in {}", test_target.display());
        return Ok(());
    }

    // Use scala-cli test
    let mut cmd = Command::new("scala-cli");
    cmd.arg("test").arg(&abs_test_target);
    cmd.current_dir(&project_dir);

    for dep in deps {
        cmd.arg("--dependency").arg(dep.coord());
    }

    let output = cmd.output().await?;
    let stdout = String::from_utf8_lossy(&output.stdout);
    let stderr = String::from_utf8_lossy(&output.stderr);

    if !stdout.is_empty() {
        println!("{}", stdout);
    }
    if !stderr.is_empty() {
        eprintln!("{}", stderr);
    }

    if !output.status.success() {
        anyhow::bail!("Test failed");
    }

    Ok(())
}

===== FILE: crates/sinter/src/cmd/workspace.rs =====
use std::path::PathBuf;

use crate::cli::WorkspaceCommands;

pub async fn cmd_workspace(cwd: &PathBuf, subcommand: &WorkspaceCommands) -> anyhow::Result<()> {
    match subcommand {
        WorkspaceCommands::Add { path } => {
            cmd_workspace_add(cwd, path).await?;
        }
    }
    Ok(())
}

async fn cmd_workspace_add(cwd: &PathBuf, member_path: &str) -> anyhow::Result<()> {
    // Find workspace root
    let workspace_root = crate::config::find_workspace_root(cwd)
        .ok_or_else(|| anyhow::anyhow!("{}", crate::i18n::t("not_in_workspace_error")))?;

    let manifest_path = workspace_root.join("Sinter.toml");

    // Check if member already exists by trying to add it
    match crate::config::add_workspace_member(&manifest_path, member_path) {
        Ok(_) => {
            println!("{}", crate::i18n::tf("added_member_to_workspace", &[member_path]));
        }
        Err(_) => {
            println!("{}", crate::i18n::tf("member_already_exists", &[member_path]));
        }
    }

    Ok(())
}

===== FILE: crates/sinter/src/cmd/builtin.rs =====
//! å†…ç½®å‘½ä»¤å®ç°
//!
//! åŒ…å«æ‰€æœ‰å†…ç½®å‘½ä»¤çš„æ‰§è¡Œé€»è¾‘

use crate::cli::Commands;
use crate::cmd::{cmd_new, cmd_init, cmd_test, cmd_workspace};
use crate::build::{run_scala_file, run_single_file_with_deps, setup_bsp};
use crate::deps::add_dependency;
use std::path::PathBuf;

/// æ‰§è¡Œå†…ç½®å‘½ä»¤
pub async fn execute_command(command: Commands, cwd: &PathBuf) -> anyhow::Result<()> {
    match command {
        Commands::New { name } => {
            cmd_new(cwd, &name).await?;
        }
        Commands::Init => {
            cmd_init(cwd).await?;
        }
        Commands::Workspace { subcommand } => {
            cmd_workspace(cwd, &subcommand).await?;
        }
        Commands::Build => {
            execute_build(cwd).await?;
        }
        Commands::Run { file, lib } => {
            execute_run(cwd, file, lib).await?;
        }
        Commands::Add { dep } => {
            execute_add(cwd, &dep).await?;
        }
        Commands::Test { file } => {
            cmd_test(cwd, file).await?;
        }
        Commands::Jsp { .. } => {
            // JSP å‘½ä»¤åº”è¯¥ç”±æ’ä»¶ç³»ç»Ÿå¤„ç†
            unreachable!("JSP command should be handled by plugin system");
        }
    }
    Ok(())
}

/// æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼ˆæ— å‘½ä»¤æ—¶ï¼‰
pub async fn execute_default(cwd: &PathBuf) -> anyhow::Result<()> {
    if cwd.join("Sinter.toml").exists() {
        let project = crate::config::load_project(cwd)?;
        let target = crate::config::get_main_file_path(&project);
        if cwd.join(&target).exists() {
            let deps = crate::config::get_dependencies(&project);
            let output = run_single_file_with_deps(cwd, &target, &deps).await?;
            println!("{}", output);
        } else {
            println!(
                "{}",
                crate::i18n::tf("main_file_not_found", &[&target.display().to_string()])
            );
        }
    } else {
        println!("{}", crate::i18n::t("no_command_provided"));
    }
    Ok(())
}

/// æ‰§è¡Œæ„å»ºå‘½ä»¤
async fn execute_build(cwd: &PathBuf) -> anyhow::Result<()> {
    if let Some(workspace_root) = crate::config::find_workspace_root(cwd) {
        // Workspace build
        let (root_project, members) = crate::config::load_workspace(&workspace_root)?.unwrap();
        for member in members {
            let member_dir = workspace_root.join(&member.package.name);
            let deps = crate::config::get_dependencies_with_workspace(&member, Some(&root_project));
            // For workspace builds, use target directory relative to workspace root
            let workspace_target_dir = format!(
                "{}/{}",
                root_project.package.target_dir, member.package.name
            );
            crate::build::build::build_with_deps(
                &member_dir,
                &deps,
                &member.package.source_dir,
                &workspace_target_dir,
                &member.package.backend,
                Some(&workspace_root),
            )
            .await?;
            println!("{}", crate::i18n::tf("built_member", &[&member.package.name]));
        }
        println!("{}", crate::i18n::t("workspace_build_succeeded"));
    } else {
        // Single project build
        let project = crate::config::load_project(cwd)?;
        let deps = crate::config::get_dependencies(&project);
        crate::build::build::build_with_deps(
            cwd,
            &deps,
            &project.package.source_dir,
            &project.package.target_dir,
            &project.package.backend,
            None,
        )
        .await?;
        println!(
            "{}",
            crate::i18n::tf("build_succeeded_with_deps", &[&deps.len().to_string()])
        );
    }
    Ok(())
}

/// æ‰§è¡Œè¿è¡Œå‘½ä»¤
async fn execute_run(cwd: &PathBuf, file: Option<PathBuf>, lib: bool) -> anyhow::Result<()> {
    let workspace_root = crate::config::find_workspace_root(cwd);
    let workspace_root_ref = workspace_root.as_ref();

    // ç¡®å®šé¡¹ç›®é…ç½®å’Œç›®å½•
    let (project, project_dir) = if let Some(ws_root) = workspace_root_ref {
        // åœ¨ workspace ä¸­ï¼ŒæŸ¥æ‰¾æˆå‘˜é¡¹ç›®
        if let Some((_ws_proj, members)) = crate::config::load_workspace(ws_root)? {
            let member_name = cwd
                .strip_prefix(ws_root)
                .unwrap()
                .components()
                .next()
                .unwrap()
                .as_os_str()
                .to_str()
                .unwrap();
            if let Some(member) = members
                .into_iter()
                .find(|m| m.package.name == member_name)
            {
                (member, ws_root.clone().join(member_name))
            } else {
                // ä¸æ˜¯æˆå‘˜ï¼Œä½œä¸ºå•ä¸ªé¡¹ç›®å¤„ç†
                let proj = crate::config::load_project(cwd)?;
                (proj, cwd.clone())
            }
        } else {
            // å®é™…ä¸Šä¸æ˜¯ workspaceï¼Œä½œä¸ºå•ä¸ªé¡¹ç›®å¤„ç†
            let proj = crate::config::load_project(cwd)?;
            (proj, cwd.clone())
        }
    } else {
        let proj = crate::config::load_project(cwd)?;
        (proj, cwd.clone())
    };

    // è·å–ä¾èµ–
    let deps = if let Some(ws_root) = workspace_root_ref {
        let ws_proj = crate::config::load_project(ws_root)?;
        crate::config::get_dependencies_with_workspace(&project, Some(&ws_proj))
    } else {
        crate::config::get_dependencies(&project)
    };

    // è®¾ç½® BSP ä»¥æ”¯æŒ IDE
    setup_bsp(
        &project_dir,
        &deps,
        &project.package.source_dir,
        &project.package.backend,
        workspace_root_ref.map(|p| p.as_path()),
    )
    .await?;

    let target = file.unwrap_or_else(|| crate::config::get_main_file_path(&project));

    if !project_dir.join(&target).exists() {
        anyhow::bail!("File not found: {}", target.display());
    }

    if lib {
        let _ = run_scala_file(&project_dir, &target, true).await?;
        println!(
            "{}",
            crate::i18n::tf("lib_compiled_only", &[&target.display().to_string()])
        );
    } else {
        let output = run_single_file_with_deps(&project_dir, &target, &deps).await?;
        println!("{}", output);
    }

    Ok(())
}

/// æ‰§è¡Œæ·»åŠ ä¾èµ–å‘½ä»¤
async fn execute_add(cwd: &PathBuf, dep: &str) -> anyhow::Result<()> {
    let workspace_root = crate::config::find_workspace_root(cwd);
    let project_dir = workspace_root.unwrap_or(cwd.clone());
    add_dependency(&project_dir, dep).await?;
    Ok(())
}



===== FILE: crates/sinter/src/deps/mod.rs =====
pub mod deps;
pub mod add;


pub use add::add_dependency;


===== FILE: crates/sinter/src/deps/add.rs =====
use std::path::Path;
use reqwest;
use serde_json;

pub async fn add_dependency(project_dir: &Path, dep_spec: &str) -> anyhow::Result<()> {
    let project = crate::config::load_project(project_dir)?;
    let manifest_path = project_dir.join("Sinter.toml");

    let (artifact, scala_ver, version) = parse_dep_spec(dep_spec, &project.package.scala_version).await?;

    let key = if artifact.contains("::") {
        artifact.clone()
    } else {
        format!("org.typelevel::{}", artifact)
    };

    let full_key = if !scala_ver.is_empty() && scala_ver != "latest" {
        format!("{}_{}", key, scala_ver)
    } else {
        key
    };

    crate::config::add_dependency_to_manifest(&manifest_path, &full_key, &version)?;
    println!("{}", crate::i18n::tf("added_dependency", &[&full_key, &version]));
    Ok(())
}

async fn parse_dep_spec(spec: &str, default_scala_version: &str) -> anyhow::Result<(String, String, String)> {
    let parts: Vec<&str> = spec.split(':').collect();
    let (artifact_part, version) = if parts.len() == 2 {
        (parts[0], parts[1].to_string())
    } else {
        (parts[0], "latest".to_string())
    };

    let artifact_parts: Vec<&str> = artifact_part.split('@').collect();
    let (mut artifact, scala_ver) = if artifact_parts.len() == 2 {
        (artifact_parts[0].to_string(), artifact_parts[1])
    } else {
        (artifact_parts[0].to_string(), default_scala_version)
    };

    // æ˜ å°„å¸¸è§åº“åˆ°æ­£ç¡®çš„ artifact id
    if artifact == "cats" {
        artifact = "cats-core".to_string();
    }
    // å¯ä»¥æ·»åŠ æ›´å¤šæ˜ å°„

    let version = if version == "latest" {
        // æŸ¥è¯¢ Maven Central è·å–æœ€æ–°ç‰ˆæœ¬
        let key = if artifact.contains("::") {
            artifact.to_string()
        } else {
            format!("org.typelevel::{}", artifact)
        };
        let group_artifact: Vec<&str> = key.split("::").collect();
        if group_artifact.len() != 2 {
            anyhow::bail!("Invalid artifact format: {}", key);
        }
        let group_id = group_artifact[0];
        let artifact_id = if !scala_ver.is_empty() && scala_ver != "latest" {
            format!("{}_{}", group_artifact[1], scala_ver)
        } else {
            group_artifact[1].to_string()
        };
        get_latest_version(group_id, &artifact_id).await?
    } else {
        version
    };

    Ok((artifact.to_string(), scala_ver.to_string(), version))
}

async fn get_latest_version(group_id: &str, artifact_id: &str) -> anyhow::Result<String> {
    let client = reqwest::Client::new();
    let json: serde_json::Value = client
        .get("https://search.maven.org/solrsearch/select")
        .header("User-Agent", "sinter/0.1.0")
        .query(&[
            ("q", format!("g:{} AND a:{}", group_id, artifact_id)),
            ("rows", "1".to_string()),
            ("wt", "json".to_string()),
        ])
        .send()
        .await?
        .json()
        .await?;
    if let Some(docs) = json["response"]["docs"].as_array() {
        if let Some(first) = docs.first() {
            if let Some(v) = first["latestVersion"].as_str() {
                return Ok(v.to_string());
            }
        }
    }
    anyhow::bail!("No version found for {}:{}", group_id, artifact_id);
}

===== FILE: crates/sinter/src/deps/deps.rs =====
// src/deps.rs
use serde::Deserialize;

#[derive(Deserialize, Debug, Clone)]
pub struct Dependency {
    pub group: String,
    pub artifact: String,
    pub version: String,
}

impl Dependency {
    pub fn from_toml_key(key: &str, version: &str) -> Self {
        let parts: Vec<&str> = key.split("::").collect();
        let (group, artifact) = if parts.len() == 2 {
            (parts[0].to_string(), parts[1].to_string())
        } else {
            ( "".to_string(), key.to_string() )
        };
        Self {
            group,
            artifact,
            version: version.to_string(),
        }
    }

    // ç”Ÿæˆ Maven åæ ‡ï¼šgroup:artifact:version
    pub fn coord(&self) -> String {
        format!("{}:{}:{}", self.group, self.artifact, self.version)
    }

}



===== FILE: crates/sinter/src/core/mod.rs =====
//! æ ¸å¿ƒæ¨¡å—
//!
//! åŒ…å«æ’ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒ trait å’Œåº”ç”¨ç»“æ„

pub mod handler;
pub mod app;

pub use handler::CommandHandler;
pub use app::Sinter;



===== FILE: crates/sinter/src/core/handler.rs =====
//! å‘½ä»¤å¤„ç†å™¨ trait
//!
//! æ‰€æœ‰å‘½ä»¤ï¼ˆåŒ…æ‹¬å†…ç½®å‘½ä»¤å’Œæ’ä»¶ï¼‰éƒ½éœ€è¦å®ç°è¿™ä¸ª trait

use async_trait::async_trait;
use clap::{ArgMatches, Command};
use std::path::PathBuf;

/// å‘½ä»¤å¤„ç†å™¨ trait
///
/// å®ç°è¿™ä¸ª trait å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½ä»¤ã€‚
/// æ— è®ºæ˜¯å†…ç½®å‘½ä»¤è¿˜æ˜¯æ’ä»¶ï¼Œéƒ½ä½¿ç”¨ç›¸åŒçš„æ¥å£ã€‚
#[async_trait]
pub trait CommandHandler: Send + Sync {
    /// è¿”å›å‘½ä»¤åç§°
    ///
    /// ä¾‹å¦‚ï¼š`"new"`, `"build"`, `"jsp"` ç­‰
    fn name(&self) -> &'static str;

    /// è¿”å›å‘½ä»¤æè¿°
    ///
    /// è¿™ä¸ªæè¿°ä¼šæ˜¾ç¤ºåœ¨å¸®åŠ©ä¿¡æ¯ä¸­
    fn about(&self) -> &'static str;

    /// é…ç½®å‘½ä»¤å‚æ•°
    ///
    /// é»˜è®¤å®ç°ä¼šè®¾ç½®å‘½ä»¤åç§°å’Œæè¿°ã€‚
    /// å¦‚æœéœ€è¦æ·»åŠ å‚æ•°ï¼Œå¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚
    fn configure(&self, cmd: Command) -> Command {
        cmd.name(self.name()).about(self.about())
    }

    /// æ‰§è¡Œå‘½ä»¤é€»è¾‘
    ///
    /// è¿™æ˜¯å‘½ä»¤çš„æ ¸å¿ƒé€»è¾‘ï¼Œå½“ç”¨æˆ·è¿è¡Œå‘½ä»¤æ—¶ä¼šè¢«è°ƒç”¨ã€‚
    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> anyhow::Result<()>;
}



===== FILE: crates/sinter/src/core/app.rs =====
//! Sinter åº”ç”¨æ„å»ºå™¨
//!
//! ä½¿ç”¨å‡½æ•°å¼ Builder æ¨¡å¼æ„å»ºåº”ç”¨ï¼Œæ”¯æŒé“¾å¼æ³¨å†Œæ’ä»¶

use crate::core::handler::CommandHandler;
use crate::cli::Cli;
use crate::runtime::Executor;

/// Sinter åº”ç”¨æ„å»ºå™¨
///
/// ä½¿ç”¨ Builder æ¨¡å¼ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨æ³¨å†Œæ’ä»¶ï¼š
///
/// ```rust
/// Sinter::new()
///     .plugin(my_plugin())
///     .plugin(another_plugin())
///     .run()
///     .await?;
/// ```
pub struct Sinter {
    plugins: Vec<Box<dyn CommandHandler>>,
}

impl Sinter {
    /// åˆ›å»ºæ–°çš„ Sinter åº”ç”¨
    pub fn new() -> Self {
        Self {
            plugins: Vec::new(),
        }
    }

    /// æ³¨å†Œå•ä¸ªæ’ä»¶
    ///
    /// æ”¯æŒé“¾å¼è°ƒç”¨
    pub fn plugin<H: CommandHandler + 'static>(mut self, handler: H) -> Self {
        self.plugins.push(Box::new(handler));
        self
    }

    /// æ‰¹é‡æ³¨å†Œæ’ä»¶
    ///
    /// å¯ä»¥ä¼ å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¸€æ¬¡æ€§æ³¨å†Œå¤šä¸ªæ’ä»¶
    pub fn plugins<H: CommandHandler + 'static, I: IntoIterator<Item = H>>(
        mut self,
        handlers: I,
    ) -> Self {
        for handler in handlers {
            self.plugins.push(Box::new(handler));
        }
        self
    }

    /// è¿è¡Œåº”ç”¨
    ///
    /// è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œæ‰§è¡Œå¯¹åº”çš„å‘½ä»¤
    pub async fn run(self) -> anyhow::Result<()> {
        let cli = Cli::parse_with_plugins(&self.plugins);
        let cwd = std::env::current_dir()?;
        Executor::new(self.plugins).execute(cli, cwd).await
    }
}

impl Default for Sinter {
    fn default() -> Self {
        Self::new()
    }
}



===== FILE: crates/sinter/src/runtime/mod.rs =====
//! è¿è¡Œæ—¶æ¨¡å—
//!
//! å¤„ç†å‘½ä»¤çš„æ‰§è¡Œå’Œåˆ†å‘é€»è¾‘

pub mod executor;

pub use executor::Executor;



===== FILE: crates/sinter/src/runtime/executor.rs =====
//! å‘½ä»¤æ‰§è¡Œå™¨
//!
//! è´Ÿè´£å°†è§£æåçš„ CLI å‘½ä»¤åˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†å™¨

use crate::core::handler::CommandHandler;
use crate::cli::Cli;
use crate::cmd::builtin;
use std::path::PathBuf;

/// å‘½ä»¤æ‰§è¡Œå™¨
///
/// è´Ÿè´£æ‰§è¡Œå‘½ä»¤ï¼ŒåŒ…æ‹¬ï¼š
/// 1. æ’ä»¶å‘½ä»¤çš„æ‰§è¡Œ
/// 2. å†…ç½®å‘½ä»¤çš„æ‰§è¡Œ
pub struct Executor {
    plugins: Vec<Box<dyn CommandHandler>>,
}

impl Executor {
    /// åˆ›å»ºæ–°çš„æ‰§è¡Œå™¨
    pub fn new(plugins: Vec<Box<dyn CommandHandler>>) -> Self {
        Self { plugins }
    }

    /// æ‰§è¡Œå‘½ä»¤
    ///
    /// æ ¹æ® CLI è§£æç»“æœï¼Œæ‰§è¡Œå¯¹åº”çš„å‘½ä»¤
    pub async fn execute(&self, cli: Cli, cwd: PathBuf) -> anyhow::Result<()> {
        // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æ˜¯æ’ä»¶å‘½ä»¤
        if let Some((command_name, matches)) = cli.raw_matches.subcommand() {
            if let Some(handler) = self.plugins.iter().find(|cmd| cmd.name() == command_name) {
                return handler.execute(matches, &cwd).await;
            }
        }

        // å¤„ç†å†…ç½®å‘½ä»¤
        if let Some(command) = cli.command {
            builtin::execute_command(command, &cwd).await?;
        } else {
            // æ²¡æœ‰æä¾›å‘½ä»¤ï¼Œå°è¯•è¿è¡Œé»˜è®¤è¡Œä¸º
            builtin::execute_default(&cwd).await?;
        }

        Ok(())
    }
}



===== FILE: crates/sinter-plugin-api/Cargo.toml =====
# crates/sinter-plugin-api/Cargo.toml
[package]
name = "sinter-plugin-api"
version.workspace = true
edition.workspace = true
license.workspace = true
description = "Sinter æ’ä»¶å¼€å‘ API"

[dependencies]
sinter = { path = "../sinter" }
anyhow      = { workspace = true }
async-trait = { workspace = true }
clap        = { workspace = true }
tokio       = { workspace = true }

===== FILE: crates/sinter-plugin-api/README.md =====
# Sinter æ’ä»¶å¼€å‘ API

è¿™ä¸ª crate æä¾›äº†å¼€å‘ Sinter æ’ä»¶æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–å’Œç±»å‹ã€‚**æ’ä»¶å¼€å‘è€…åªéœ€è¦ä¾èµ–è¿™ä¸€ä¸ª crate**ï¼Œå°±å¯ä»¥è·å¾—æ‰€æœ‰å¿…è¦çš„å·¥å…·ã€‚

## ç‰¹æ€§

- âœ… **å•ä¸€ä¾èµ–**ï¼šåªéœ€è¦æ·»åŠ  `sinter-plugin` åˆ°ä½ çš„ `Cargo.toml`
- âœ… **ç±»å‹é‡æ–°å¯¼å‡º**ï¼šæ‰€æœ‰å¸¸ç”¨ç±»å‹éƒ½å·²é‡æ–°å¯¼å‡ºï¼Œæ— éœ€é¢å¤–å¯¼å…¥
- âœ… **ç®€åŒ–å¼€å‘**ï¼šä¸éœ€è¦å…³å¿ƒåº•å±‚ä¾èµ–ç‰ˆæœ¬

## ä½¿ç”¨

### 1. æ·»åŠ ä¾èµ–

åœ¨ä½ çš„æ’ä»¶é¡¹ç›®çš„ `Cargo.toml` ä¸­ï¼š

```toml
[dependencies]
sinter-plugin = { path = "../sinter-plugin-api" }
# æˆ–è€…å¦‚æœå‘å¸ƒåˆ° crates.ioï¼š
# sinter-plugin = "0.1.0"
```

### 2. åˆ›å»ºæ’ä»¶

```rust
use scargo_plugin_api::*;

pub struct MyPlugin;

#[async_trait]
impl CommandHandler for MyPlugin {
    fn name(&self) -> &'static str {
        "mycommand"
    }

    fn about(&self) -> &'static str {
        "My awesome command"
    }

    fn configure(&self, cmd: Command) -> Command {
        cmd.arg(Arg::new("input").required(true))
    }

    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> AnyhowResult<()> {
        let input = matches.get_one::<String>("input").unwrap();
        println!("Processing: {}", input);
        
        // ä½¿ç”¨é‡æ–°å¯¼å‡ºçš„ fs æ¨¡å—
        fs::write(cwd.join("output.txt"), input).await?;
        
        Ok(())
    }
}

pub fn my_plugin() -> MyPlugin {
    MyPlugin
}
```

## é‡æ–°å¯¼å‡ºçš„ç±»å‹

é€šè¿‡ `use scargo_plugin_api::*;` ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

- `CommandHandler` - æ’ä»¶ trait
- `async_trait` - async trait å®
- `Command`, `Arg`, `ArgMatches` - clap ç±»å‹
- `PathBuf` - è·¯å¾„ç±»å‹
- `AnyhowResult<T>` - é”™è¯¯å¤„ç†ç±»å‹ï¼ˆç­‰åŒäº `anyhow::Result<T>`ï¼‰
- `fs` - tokio æ–‡ä»¶ç³»ç»Ÿæ¨¡å—

## å®Œæ•´ç¤ºä¾‹

æŸ¥çœ‹ `plugins/src/jsp.rs` æŸ¥çœ‹å®Œæ•´çš„æ’ä»¶ç¤ºä¾‹ã€‚



===== FILE: crates/sinter-plugin-api/src/lib.rs =====
//! Sinter æ’ä»¶å¼€å‘ API
//!
//! è¿™ä¸ª crate æä¾›äº†å¼€å‘ Sinter æ’ä»¶æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–å’Œç±»å‹ã€‚
//! æ’ä»¶å¼€å‘è€…åªéœ€è¦ä¾èµ–è¿™ä¸ª crateï¼Œå°±å¯ä»¥è·å¾—æ‰€æœ‰å¿…è¦çš„å·¥å…·ã€‚
//!
//! ## ä½¿ç”¨ç¤ºä¾‹
//!
//! ```rust
//! use scargo_plugin_api::*;
//!
//! pub struct MyPlugin;
//!
//! #[async_trait]
//! impl CommandHandler for MyPlugin {
//!     fn name(&self) -> &'static str {
//!         "mycommand"
//!     }
//!
//!     fn about(&self) -> &'static str {
//!         "My awesome command"
//!     }
//!
//!     fn configure(&self, cmd: Command) -> Command {
//!         cmd.arg(Arg::new("input").required(true))
//!     }
//!
//!     async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> AnyhowResult<()> {
//!         let input = matches.get_one::<String>("input").unwrap();
//!         println!("Processing: {}", input);
//!         
//!         // ä½¿ç”¨é‡æ–°å¯¼å‡ºçš„ fs æ¨¡å—
//!         fs::write(cwd.join("output.txt"), input).await?;
//!         
//!         Ok(())
//!     }
//! }
//! ```

// é‡æ–°å¯¼å‡ºæ ¸å¿ƒç±»å‹
pub use sinter::CommandHandler;

// é‡æ–°å¯¼å‡ºå¸¸ç”¨ç±»å‹ï¼Œæ–¹ä¾¿æ’ä»¶å¼€å‘
pub use clap::{Arg, ArgMatches, Command};
pub use std::path::PathBuf;
pub use anyhow::Result as AnyhowResult;
pub use async_trait::async_trait;

// é‡æ–°å¯¼å‡º tokio çš„å¸¸ç”¨åŠŸèƒ½
pub use tokio::fs;



===== FILE: crates/sinter-cli/Cargo.toml =====
# crates/sinter-cli/Cargo.toml   â† ä¿®æ”¹è¿™é‡Œ
[package]
name = "sinter-cli"               # â† æ”¹æˆè¿™ä¸ªï¼ˆéšä¾¿èµ·ï¼Œåªè¦ä¸æ˜¯ sinterï¼‰
# æˆ–è€… name = "sinter-cli"
version.workspace = true
edition.workspace = true
license.workspace = true

[[bin]]
name = "sinter"                   # â† è¿™ä¸ªä¿æŒ sinterï¼Œæœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶è¿˜æ˜¯å« sinter
path = "src/main.rs"

[dependencies]
sinter = { path = "../sinter" }
sinter-plugins = { path = "../plugins" }
anyhow = { workspace = true }
tokio = { workspace = true }

===== FILE: crates/sinter-cli/src/main.rs =====
use sinter::Sinter;

// ä»æ’ä»¶ crate å¯¼å…¥æ’ä»¶
// æ³¨æ„ï¼šæ’ä»¶ crate ä¾èµ–ä¸»é¡¹ç›®ï¼Œä½†ä¸»é¡¹ç›®ä¸ä¾èµ–æ’ä»¶ crate
// è¿™æ ·å¯ä»¥é¿å…å¾ªç¯ä¾èµ–
use scargo_plugins::jsp_plugin;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    // å‡½æ•°å¼Builderæ¨¡å¼ - é“¾å¼æ³¨å†Œæ’ä»¶
    Sinter::new()
        .plugin(jsp_plugin())
        .run()
        .await
}

===== FILE: crates/plugins/Cargo.toml =====
# crates/plugins/Cargo.toml
[package]
name = "sinter-plugins"
version.workspace = true
edition.workspace = true
license.workspace = true

[dependencies]
sinter-plugin-api = { path = "../sinter-plugin-api" }

===== FILE: crates/plugins/README.md =====
# Sinter æ’ä»¶é›†åˆ

è¿™ä¸ª crate åŒ…å« Sinter çš„æ‰©å±•æ’ä»¶ã€‚

## ç»“æ„

```
plugins/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs      # å¯¼å‡ºæ‰€æœ‰æ’ä»¶
â”‚   â””â”€â”€ jsp.rs      # JSP é¡¹ç›®ç”Ÿæˆæ’ä»¶
â””â”€â”€ README.md
```

## ä½¿ç”¨

åœ¨ä¸»é¡¹ç›®çš„ `main.rs` ä¸­ï¼š

```rust
use sinter::Sinter;
use plugins::jsp_plugin;

#[tokio::main]
async fn main() -> anyhow::Result<()> {
    Sinter::new()
        .plugin(jsp_plugin())
        .run()
        .await
}
```

## æ·»åŠ æ–°æ’ä»¶

### 1. æ·»åŠ ä¾èµ–

åœ¨ `Cargo.toml` ä¸­ï¼Œåªéœ€è¦ä¾èµ– `sinter-plugin`ï¼š

```toml
[dependencies]
sinter-plugin = { path = "../sinter-plugin-api" }
```

### 2. åˆ›å»ºæ’ä»¶

åœ¨ `src/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ’ä»¶æ–‡ä»¶ï¼ˆå¦‚ `my_plugin.rs`ï¼‰ï¼š

```rust
// src/my_plugin.rs
use scargo_plugin_api::*;

pub struct MyPlugin;

#[async_trait]
impl CommandHandler for MyPlugin {
    fn name(&self) -> &'static str {
        "mycommand"
    }

    fn about(&self) -> &'static str {
        "My awesome command"
    }

    fn configure(&self, cmd: Command) -> Command {
        cmd.arg(Arg::new("input").required(true))
    }

    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> AnyhowResult<()> {
        let input = matches.get_one::<String>("input").unwrap();
        println!("Processing: {}", input);
        
        // ä½¿ç”¨é‡æ–°å¯¼å‡ºçš„ fs æ¨¡å—
        fs::write(cwd.join("output.txt"), input).await?;
        
        Ok(())
    }
}

pub fn my_plugin() -> MyPlugin {
    MyPlugin
}
```

### 3. å¯¼å‡ºæ’ä»¶

åœ¨ `src/lib.rs` ä¸­ï¼š

```rust
pub mod my_plugin;
pub use my_plugin::my_plugin;
```

## ä¼˜åŠ¿

ä½¿ç”¨ `sinter-plugin` çš„å¥½å¤„ï¼š

- âœ… **å•ä¸€ä¾èµ–**ï¼šä¸éœ€è¦å…³å¿ƒåº•å±‚ä¾èµ–ç‰ˆæœ¬
- âœ… **ç®€åŒ–å¯¼å…¥**ï¼šæ‰€æœ‰ç±»å‹éƒ½é€šè¿‡ `use scargo_plugin_api::*;` å¯¼å…¥
- âœ… **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰æ’ä»¶ä½¿ç”¨ç›¸åŒçš„ API
- âœ… **æ˜“äºç»´æŠ¤**ï¼šä¾èµ–æ›´æ–°åªéœ€æ›´æ–° API crate



===== FILE: crates/plugins/src/lib.rs =====
//! Sinter æ’ä»¶é›†åˆ
//!
//! è¿™ä¸ª crate åŒ…å« Sinter çš„æ‰©å±•æ’ä»¶ã€‚
//! æ‰€æœ‰æ’ä»¶éƒ½å®ç° `sinter::CommandHandler` traitã€‚

pub mod jsp;

// å¯¼å‡ºæ‰€æœ‰æ’ä»¶
pub use jsp::jsp_plugin;



===== FILE: crates/plugins/src/jsp.rs =====
//! JSP é¡¹ç›®ç”Ÿæˆæ’ä»¶
//!
//! è¿™ä¸ªæ–‡ä»¶å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„æ’ä»¶ã€‚
//! åªéœ€è¦å®ç° CommandHandler trait çš„å››ä¸ªæ–¹æ³•å³å¯ï¼š
//! 1. name() - è¿”å›å‘½ä»¤åç§°
//! 2. about() - è¿”å›å‘½ä»¤æè¿°
//! 3. configure() - é…ç½®å‘½ä»¤å‚æ•°ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å®ç°ï¼‰
//! 4. execute() - æ‰§è¡Œå‘½ä»¤é€»è¾‘
//!
//! æ³¨æ„ï¼šåªéœ€è¦ä¾èµ– `sinter-plugin`ï¼Œæ‰€æœ‰å¿…è¦çš„ç±»å‹éƒ½å·²é‡æ–°å¯¼å‡º

use scargo_plugin_api::*;

// åµŒå…¥æ¨¡æ¿æ–‡ä»¶
static POM_XML_TEMPLATE: &str = include_str!("../templates/pom.xml.template");
static WEB_XML_TEMPLATE: &str = include_str!("../templates/web.xml.template");
static INDEX_JSP_TEMPLATE: &str = include_str!("../templates/index.jsp.template");

/// JSP æ’ä»¶ç»“æ„ä½“
pub struct JspPlugin;

#[async_trait]
impl CommandHandler for JspPlugin {
    /// å‘½ä»¤åç§°ï¼šç”¨æˆ·è¾“å…¥ `sinter jsp` æ—¶ä¼šè§¦å‘
    fn name(&self) -> &'static str {
        "jsp"
    }

    /// å‘½ä»¤æè¿°ï¼šæ˜¾ç¤ºåœ¨å¸®åŠ©ä¿¡æ¯ä¸­
    fn about(&self) -> &'static str {
        "Generate a new JSP project"
    }

    /// é…ç½®å‘½ä»¤å‚æ•°ï¼šå®šä¹‰ `sinter jsp <name>` ä¸­çš„å‚æ•°
    fn configure(&self, cmd: Command) -> Command {
        cmd.about(self.about()).arg(
            Arg::new("name")
                .help("Name of the JSP project")
                .required(true)
        )
    }

    /// æ‰§è¡Œå‘½ä»¤é€»è¾‘ï¼šå½“ç”¨æˆ·è¿è¡Œ `sinter jsp <name>` æ—¶è°ƒç”¨
    async fn execute(&self, matches: &ArgMatches, cwd: &PathBuf) -> AnyhowResult<()> {
        // ä»å‘½ä»¤è¡Œå‚æ•°ä¸­è·å–é¡¹ç›®åç§°
        let name = matches
            .get_one::<String>("name")
            .expect("name argument is required");

        // åˆ›å»ºé¡¹ç›®ç›®å½•
        let proj_dir = cwd.join(name);
        if proj_dir.exists() {
            println!("JSP project '{}' already exists", name);
            return Ok(());
        }

        // åˆ›å»ºç›®å½•ç»“æ„
        fs::create_dir_all(proj_dir.join("src/main/webapp/WEB-INF")).await?;
        fs::create_dir_all(proj_dir.join("src/main/java")).await?;
        fs::create_dir_all(proj_dir.join("src/main/resources")).await?;

        // ç”Ÿæˆ pom.xml
        let pom_xml = POM_XML_TEMPLATE.replace("{{name}}", name);
        fs::write(proj_dir.join("pom.xml"), pom_xml).await?;

        // ç”Ÿæˆ web.xml
        fs::write(proj_dir.join("src/main/webapp/WEB-INF/web.xml"), WEB_XML_TEMPLATE).await?;

        // ç”Ÿæˆ index.jsp
        fs::write(proj_dir.join("src/main/webapp/index.jsp"), INDEX_JSP_TEMPLATE).await?;

        println!("Created JSP project '{}'", name);
        println!("To build and run:");
        println!("  cd {}", name);
        println!("  mvn clean package");
        println!("  # Deploy the generated .war file to Tomcat");

        Ok(())
    }
}

// å¯¼å‡ºæ’ä»¶å®ä¾‹åˆ›å»ºå‡½æ•°ï¼Œä¾›æ³¨å†Œä½¿ç”¨
pub fn jsp_plugin() -> JspPlugin {
    JspPlugin
}



===== FILE: cli/Cargo.toml =====


ä¼˜åŒ–æ•´ä¸ªé¡¹ç›®çš„ç»“æ„ï¼Œå¹¶æ›´æ”¹é¡¹ç›®åå­—ï¼Œscargoæœ‰ç‚¹åƒç›²ç›®æ•ˆä»¿cargoçš„æ„Ÿè§‰